import{u as P,b as j,j as e,H as R,L as $,r as g}from"./app-Cs9jEqCJ.js";import{D as A}from"./DashboardLayout-CHKxiySw.js";import{C as k}from"./ConfirmModal-Ceu_5B4P.js";import"./Toast-e1HMQsHT.js";import"./createLucideIcon-BrlwNA_4.js";import"./index-B7mgmw7u.js";import"./menu-Ct6K1sdo.js";import"./house-J3cK0ICJ.js";import"./shopping-cart-BVmJt-7R.js";import"./user-CgIDqBLC.js";import"./book-open-ntIdwci1.js";function I({roles:r,permissions:p}){var h,f,u,b;const{sideLinks:i}=P().props,[n,d]=j.useState(!1),[s,m]=j.useState({show:!1,type:null,title:"",message:""}),N=(a,l,t)=>{const o=t?"remove":"add",c=l.replace(/[_-]/g," ").split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),x=a.charAt(0).toUpperCase()+a.slice(1);m({show:!0,type:"toggle-permission",title:`${o==="add"?"Grant":"Remove"} Permission`,message:`Are you sure you want to ${o==="add"?"grant":"remove"} "${c}" permission ${o==="add"?"to":"from"} the ${x} role?`,data:{roleName:a,permissionName:l,action:o}})},w=()=>{m({show:!0,type:"reset-defaults",title:"Reset to Default Permissions",message:"Are you sure you want to reset all roles to their default permissions? This will override any custom permission settings you have configured. This action cannot be undone.",data:null})},v=()=>{if(s.type)if(d(!0),s.type==="toggle-permission"&&s.data){const{roleName:a,permissionName:l,action:t}=s.data;g.post(route("admin.roles.toggle-permission"),{role:a,permission:l,action:t},{preserveScroll:!0,onFinish:()=>{d(!1),m({show:!1,type:null,title:"",message:""})}})}else s.type==="reset-defaults"&&g.post(route("admin.roles.reset-defaults"),{},{preserveScroll:!0,onFinish:()=>{d(!1),m({show:!1,type:null,title:"",message:""})}})},C=()=>{g.get(route("admin.roles.audit-log"),{},{preserveScroll:!0})};return e.jsxs(A,{sideLinks:i,children:[e.jsx(R,{title:"Roles & Permissions - Beacon Leadership Institute"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 font-montserrat",children:"Role & Permission Management"}),e.jsx("p",{className:"text-gray-600 font-lato",children:"Configure roles and their associated permissions to control system access."})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs($,{href:route("admin.users.index"),className:"inline-flex items-center gap-2 bg-gray-600 hover:bg-gray-700 py-3 px-6 rounded-lg font-medium text-white transition-all duration-200 shadow-sm font-montserrat",children:[e.jsx("i",{className:"fas fa-users w-4 h-4"}),e.jsx("span",{children:"Manage Users"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:r.map(a=>e.jsx(M,{role:a},a.id))}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 font-montserrat",children:"Permission Matrix"}),e.jsx("p",{className:"text-gray-600 mt-1 font-lato",children:"Manage detailed permissions for each role"})]}),e.jsx("div",{className:"p-6",children:Object.entries(p).map(([a,l])=>e.jsxs("div",{className:"mb-8 last:mb-0",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 capitalize font-montserrat",children:[a.replace(/[_-]/g," ")," Permissions"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600 w-1/3 font-montserrat",children:"Permission"}),r.map(t=>e.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-600 font-montserrat",children:t.name.charAt(0).toUpperCase()+t.name.slice(1)},t.id))]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 font-lato",children:t.name.replace(/[_-]/g," ").split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 font-lato",children:t.name})]})}),r.map(o=>{const c=o.permissions.some(x=>x.name===t.name);return e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("button",{onClick:()=>N(o.name,t.name,c),className:`w-6 h-6 rounded ${c?"bg-green-500 text-white":"bg-gray-200 text-gray-400"} hover:scale-110 transition-all duration-200`,title:c?"Remove permission":"Grant permission",children:e.jsx("i",{className:`fas fa-${c?"check":"times"} w-4 h-4`})})},o.id)})]},t.id))})]})})]},a))})]}),e.jsxs("div",{className:"mt-8 bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 font-montserrat",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:w,className:"flex items-center justify-center gap-2 px-4 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors font-montserrat",children:[e.jsx("i",{className:"fas fa-undo w-4 h-4"}),"Reset to Defaults"]}),e.jsxs("a",{href:route("admin.roles.export"),className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors font-montserrat",children:[e.jsx("i",{className:"fas fa-download w-4 h-4"}),"Export Configuration"]}),e.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-2 px-4 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors font-montserrat",children:[e.jsx("i",{className:"fas fa-clock w-4 h-4"}),"View Audit Log"]})]})]}),e.jsx(k,{show:s.show,onClose:()=>m({show:!1,type:null,title:"",message:""}),onConfirm:v,title:s.title,message:s.message,confirmText:s.type==="toggle-permission"?((h=s.data)==null?void 0:h.action)==="add"?"Grant Permission":"Remove Permission":"Reset to Defaults",cancelText:"Cancel",confirmButtonClass:s.type==="toggle-permission"&&((f=s.data)==null?void 0:f.action)==="remove"?"bg-red-600 hover:bg-red-700 text-white":s.type==="reset-defaults"?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-green-600 hover:bg-green-700 text-white",icon:e.jsx("div",{className:`mx-auto flex items-center justify-center h-12 w-12 rounded-full ${s.type==="toggle-permission"&&((u=s.data)==null?void 0:u.action)==="remove"?"bg-red-100":s.type==="reset-defaults"?"bg-yellow-100":"bg-green-100"}`,children:e.jsx("i",{className:`fas ${s.type==="toggle-permission"&&((b=s.data)==null?void 0:b.action)==="remove"?"fa-times-circle text-red-600":s.type==="reset-defaults"?"fa-undo text-yellow-600":"fa-check-circle text-green-600"} text-xl`})}),isProcessing:n,processingText:s.type==="reset-defaults"?"Resetting...":"Processing..."})]})}function M({role:r}){const i=(n=>({admin:{bg:"bg-red-50",icon:"bg-red-100",text:"text-red-800",iconColor:"text-red-600"},instructor:{bg:"bg-green-50",icon:"bg-green-100",text:"text-green-800",iconColor:"text-green-600"},student:{bg:"bg-blue-50",icon:"bg-blue-100",text:"text-blue-800",iconColor:"text-blue-600"}})[n]||{bg:"bg-gray-50",icon:"bg-gray-100",text:"text-gray-800",iconColor:"text-gray-600"})(r.name);return e.jsx("div",{className:`bg-white rounded-xl border border-gray-200 shadow-sm ${i.bg}`,children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 ${i.icon} rounded-lg`,children:e.jsx("i",{className:`fas fa-shield-alt w-6 h-6 ${i.iconColor}`})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("h3",{className:`text-lg font-semibold ${i.text} font-montserrat`,children:[r.name.charAt(0).toUpperCase()+r.name.slice(1)," Role"]}),e.jsxs("p",{className:"text-sm text-gray-600 font-lato",children:[r.permissions.length," permissions"]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 font-montserrat",children:"Key Permissions:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.permissions.slice(0,4).map(n=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-white text-gray-600 font-lato",children:n.name.replace(/[-_]/g," ")},n.id)),r.permissions.length>4&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-200 text-gray-600 font-lato",children:["+",r.permissions.length-4," more"]})]})]})]})})}export{I as default};
