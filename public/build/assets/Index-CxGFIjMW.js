import{u as L,b as a,j as e,H as _,L as o,r as x}from"./app-D7ioXeQV.js";import{D as T}from"./DashboardLayout-DclNSd-b.js";import{C as b}from"./ConfirmModal-DVoWKUbo.js";import"./Toast-BfUNHYsc.js";import"./createLucideIcon-BIHSp5us.js";import"./index-B7mgmw7u.js";import"./menu-ClDvqpYV.js";import"./house-D2GQs30X.js";import"./shopping-cart-E3WFiWrB.js";import"./user-D7w6E_X-.js";import"./book-open-sTujEisb.js";function W({courses:h,categories:I}){const{sideLinks:y}=L().props,[N,c]=a.useState(!1),[v,d]=a.useState(!1),[w,l]=a.useState(!1),[s,r]=a.useState(null),[C,f]=a.useState(!1),[i,u]=a.useState(!1),[n,p]=a.useState(!1),[g,m]=a.useState(""),R=t=>{r(t),c(!0)},S=t=>{r(t),m(""),l(!0)},A=()=>{s&&(f(!0),x.delete(route("admin.courses.destroy",s.slug),{preserveScroll:!0,onFinish:()=>{f(!1),c(!1),r(null)}}))},j=t=>{r(t),d(!0)},k=()=>{s&&(u(!0),x.post(route("admin.courses.approve",s.slug),{},{preserveScroll:!0,onFinish:()=>{u(!1),d(!1),r(null)}}))},D=()=>{s&&(p(!0),x.post(route("admin.courses.reject",s.slug),{rejection_reason:g},{preserveScroll:!0,onFinish:()=>{p(!1),l(!1),r(null),m("")}}))},M=t=>{const P={draft:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",under_review:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[t.toLowerCase()]||"bg-gray-100 text-gray-800",F={draft:"Draft",pending:"Pending Review",under_review:"Under Review",approved:"Approved",rejected:"Rejected"}[t.toLowerCase()]||t;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium font-montserrat ${P}`,children:F})};return e.jsxs(T,{sideLinks:y,children:[e.jsx(_,{title:"Course Management - Beacon Leadership Institute"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 font-montserrat",children:"Course Management"}),e.jsx("p",{className:"text-gray-600 font-lato",children:"Manage all available courses, add new ones, or update existing course details."})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(o,{href:route("admin.courses.create"),className:"inline-flex items-center gap-2 bg-primary hover:bg-primary-600 py-3 px-6 rounded-lg font-medium text-white transition-all duration-200 shadow-sm font-montserrat",children:[e.jsx("i",{className:"fas fa-plus w-4 h-4"}),e.jsx("span",{children:"Create Course"})]})})]}),e.jsx("div",{className:"relative overflow-x-auto shadow-lg rounded-xl bg-white border border-gray-200",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[e.jsx("thead",{className:"text-xs text-gray-600 uppercase bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Course Details"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Thumbnail"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Instructor"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Actions"})]})}),e.jsx("tbody",{children:h.length>0?h.map(t=>e.jsxs("tr",{className:"bg-white border-b border-gray-100 hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-base leading-tight font-montserrat",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2 font-lato",children:t.description?t.description.substring(0,80)+(t.description.length>80?"...":""):"No description available"})]})})}),e.jsx("td",{className:"px-6 py-4",children:t.thumbnail_path?e.jsx("img",{className:"w-16 h-12 rounded-lg object-cover shadow-sm border border-gray-200",src:`/storage/${t.thumbnail_path}`,alt:t.title}):e.jsx("div",{className:"w-16 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-image w-5 h-5 text-gray-400"})})}),e.jsx("td",{className:"px-6 py-4",children:t.price===0?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 font-montserrat",children:"Free"}):e.jsxs("span",{className:"font-semibold text-gray-900 font-lato",children:["â‚¦",t.price.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-primary-700 font-montserrat",children:t.instructor.name.charAt(0).toUpperCase()})}),e.jsxs("span",{className:"font-medium text-gray-700 font-lato",children:[t.instructor.name.substring(0,15),t.instructor.name.length>15?"...":""]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 font-montserrat",children:t.category.name.charAt(0).toUpperCase()+t.category.name.slice(1)})}),e.jsx("td",{className:"px-6 py-4",children:M(t.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{href:route("admin.courses.edit",t.slug),title:"Edit Course",className:"inline-flex items-center justify-center w-8 h-8 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors duration-200",children:e.jsx("i",{className:"fas fa-edit w-4 h-4"})}),e.jsx(o,{href:route("admin.courses.builder",t.slug),title:"Course Builder",className:"inline-flex items-center justify-center w-8 h-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors duration-200",children:e.jsx("i",{className:"fas fa-cog w-4 h-4"})}),t.status==="draft"&&e.jsx("button",{onClick:()=>j(t),disabled:i||n,title:"Publish Course",className:"inline-flex items-center justify-center w-8 h-8 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors duration-200 disabled:opacity-50",children:e.jsx("i",{className:"fas fa-rocket w-4 h-4"})}),(t.status==="pending"||t.status==="under_review")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(t),disabled:i||n,title:"Approve & Publish Course",className:"inline-flex items-center justify-center w-8 h-8 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors duration-200 disabled:opacity-50",children:e.jsx("i",{className:"fas fa-check w-4 h-4"})}),e.jsx("button",{onClick:()=>S(t),disabled:i||n,title:"Reject Course",className:"inline-flex items-center justify-center w-8 h-8 text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-colors duration-200 disabled:opacity-50",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})})]}),e.jsx("button",{onClick:()=>R(t),title:"Delete Course",className:"inline-flex items-center justify-center w-8 h-8 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200",children:e.jsx("i",{className:"fas fa-trash w-4 h-4"})})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-16 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 text-gray-400",children:[e.jsx("i",{className:"fas fa-book-open w-12 h-12 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 font-montserrat",children:"No courses found"}),e.jsx("p",{className:"max-w-md text-center font-lato",children:"Get started by creating your first course."}),e.jsxs(o,{href:route("admin.courses.create"),className:"mt-4 inline-flex items-center px-4 py-2 bg-primary text-white text-sm font-medium rounded-lg hover:bg-primary-600 focus:ring-4 focus:ring-primary-300 transition shadow-sm font-montserrat",children:[e.jsx("i",{className:"fas fa-plus w-4 h-4 mr-2"}),"Create Course"]})]})})})})]})}),e.jsx(b,{show:N&&!!s,onClose:()=>{c(!1),r(null)},onConfirm:A,title:`Delete Course: ${(s==null?void 0:s.title)||""}`,message:e.jsxs("div",{className:"space-y-3 text-left",children:[e.jsx("p",{children:"Are you sure you want to permanently delete this course?"}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[e.jsxs("p",{className:"text-sm text-amber-800 font-semibold mb-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"This will permanently delete:"]}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1 ml-6 list-disc",children:[e.jsx("li",{children:"All course modules and lessons"}),e.jsx("li",{children:"All video content from Vimeo (including preview videos)"}),e.jsx("li",{children:"All course files (PDFs, thumbnails, etc.)"}),e.jsx("li",{children:"Student enrollment records"}),e.jsx("li",{children:"Course requirements and outcomes"})]})]}),e.jsx("p",{className:"text-sm font-semibold text-red-600",children:"This action cannot be undone!"})]}),confirmText:"Delete Course",cancelText:"Cancel",confirmButtonClass:"bg-red-600 hover:bg-red-700 text-white",icon:e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx("i",{className:"fas fa-trash text-red-600 text-xl"})}),isProcessing:C,processingText:"Deleting Course..."}),e.jsx(b,{show:v&&s!==null,onClose:()=>{d(!1),r(null)},onConfirm:k,title:"Approve & Publish Course",message:e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Approve ",e.jsxs("span",{className:"font-semibold text-gray-900",children:['"',s==null?void 0:s.title,'"']})," and publish it for students to enroll?"]}),e.jsx("p",{className:"mt-2 text-green-600",children:"Once approved, this course will be visible to all students and they can enroll."})]}),confirmText:"Approve & Publish",confirmButtonClass:"bg-green-600 hover:bg-green-700 text-white",icon:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-check-circle w-6 h-6 text-green-600"})}),isProcessing:i,processingText:"Approving..."}),w&&s&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl p-6 w-full max-w-md mx-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 mb-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-montserrat",children:"Reject Course"}),e.jsx("button",{type:"button",onClick:()=>l(!1),className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center transition-colors",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mb-4 mx-auto",children:e.jsx("i",{className:"fas fa-times-circle w-6 h-6 text-orange-600"})}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 font-montserrat mb-2",children:['Reject "',s.title,'"']}),e.jsx("p",{className:"text-sm text-gray-500 font-lato mb-4",children:"Provide a reason for rejection (optional). The instructor will be notified."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rejection_reason",className:"block text-sm font-medium text-gray-700 mb-2 font-lato",children:"Rejection Reason"}),e.jsx("textarea",{id:"rejection_reason",rows:4,value:g,onChange:t=>m(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato",placeholder:"E.g., Content quality needs improvement, missing learning objectives, etc."})]})]}),e.jsxs("div",{className:"flex items-center justify-end pt-4 mt-4 border-t border-gray-200 gap-3",children:[e.jsx("button",{onClick:()=>l(!1),type:"button",className:"py-2.5 px-5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors font-lato",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:n,className:"px-5 py-2.5 text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors inline-flex items-center font-montserrat disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin w-4 h-4 mr-2"}),"Rejecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-times w-4 h-4 mr-2"}),"Reject Course"]})})]})]})})]})}export{W as default};
