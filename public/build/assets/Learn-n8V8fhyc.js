import{b as d,j as e,H as $,L as c}from"./app-DG-CQ1ri.js";function E({course:a,currentLesson:l,previousLesson:h,nextLesson:n,progress:f,totalLessons:M,completedLessons:S}){var v;const[g,j]=d.useState("overview"),[x,m]=d.useState([]),[p,b]=d.useState(!0),[C,y]=d.useState((l==null?void 0:l.completed)||!1),[u,_]=d.useState(0),N=d.useRef(null);d.useRef(void 0),d.useEffect(()=>{if(a.modules&&a.modules.length>0&&x.length===0){const s=a.modules.find(t=>{var i;return(i=t.lessons)==null?void 0:i.some(o=>o.id===(l==null?void 0:l.id))});m(s?[s.id]:[a.modules[0].id])}},[a.modules,l]),d.useEffect(()=>{l&&y(l.completed||!1)},[l]);const w=s=>{m(t=>t.includes(s)?t.filter(i=>i!==s):[...t,s])},k=s=>{if(!s)return"...";if(typeof s=="string")return s;const t=Math.floor(s/60),i=Math.floor(s%60);return`${t}:${i.toString().padStart(2,"0")}`};return e.jsxs(e.Fragment,{children:[e.jsx($,{title:`${(l==null?void 0:l.title)||"Learn"} - ${a.title}`}),e.jsxs("div",{className:"min-h-screen bg-gray-800 text-white",children:[e.jsx("div",{className:"bg-gray-900 shadow-lg sticky top-0 z-50",children:e.jsx("div",{className:"max-w-[1920px] mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[e.jsx(c,{href:route("courses.show",a.slug),className:"text-gray-300 hover:text-white",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"border-l border-gray-700 h-8 mx-4"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h1",{className:"text-lg font-bold text-white truncate",children:a.title})})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${f}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-300",children:[Math.round(f),"% complete"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[h&&e.jsx(c,{href:route("courses.learn",{course:a.slug,lesson:h.id}),className:"px-4 py-2 text-sm font-medium bg-gray-700 hover:bg-gray-600 rounded-md",children:"Previous"}),n&&e.jsx(c,{href:route("courses.learn",{course:a.slug,lesson:n.id}),className:"px-4 py-2 text-sm font-medium bg-primary hover:bg-primary/90 rounded-md",children:"Next lesson"})]}),e.jsx("button",{onClick:()=>b(!p),className:"p-2 text-gray-400 hover:text-white lg:hidden",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]})]})})}),e.jsxs("div",{className:"flex h-[calc(100vh-4rem)]",children:[e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:e.jsxs("div",{className:"flex-1 flex flex-col p-6",children:[e.jsx("div",{className:"bg-black aspect-video rounded-lg overflow-hidden shadow-2xl relative",children:l&&l.video_url?e.jsx("div",{className:"aspect-video relative",children:l.video_url.includes("vimeo.com")||l.video_url.includes("player.vimeo.com")?e.jsx("iframe",{src:`${l.video_url}?badge=0&autopause=0&player_id=0&app_id=58479`,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture; clipboard-write",allowFullScreen:!0,title:l.title}):e.jsxs(e.Fragment,{children:[e.jsxs("video",{ref:N,className:"w-full h-full",controls:!0,preload:"metadata",poster:"/images/video-placeholder.jpg",children:[e.jsx("source",{src:l.video_url,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-700",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-accent transition-all duration-300",style:{width:`${u}%`}})})]})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"Select a lesson to begin."})}),e.jsxs("div",{className:"py-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:l==null?void 0:l.title}),e.jsx("p",{className:"text-gray-400",children:l==null?void 0:l.subtitle})]}),e.jsx("div",{className:"border-b border-gray-700",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:["overview","notes","resources","discussion"].map(s=>e.jsx("button",{onClick:()=>j(s),className:`py-4 px-1 border-b-2 font-medium text-sm capitalize ${g===s?"border-primary text-primary":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500"}`,children:s},s))})}),e.jsx("div",{className:"py-6 flex-1 overflow-y-auto"})]})}),e.jsxs("div",{className:`w-96 bg-gray-900 border-l border-gray-700 flex-col ${p?"flex":"hidden"} lg:flex`,children:[e.jsx("div",{className:"p-5 border-b border-gray-700",children:e.jsx("h3",{className:"font-bold text-lg",children:"Course content"})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:(v=a.modules)==null?void 0:v.map((s,t)=>{var i,o;return e.jsxs("div",{className:"border-b border-gray-700 last:border-b-0",children:[e.jsx("button",{onClick:()=>w(s.id),className:"w-full text-left p-5 hover:bg-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-base",children:`Section ${t+1}: ${s.title}`}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[((i=s.lessons)==null?void 0:i.length)||0," lessons"]})]}),e.jsx("svg",{className:`w-5 h-5 transform transition-transform ${x.includes(s.id)?"rotate-90":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})}),x.includes(s.id)&&((o=s.lessons)==null?void 0:o.map(r=>e.jsx(c,{href:route("courses.learn",{course:a.slug,lesson:r.id}),className:`block pl-8 pr-4 py-3 text-sm border-l-4 ${(l==null?void 0:l.id)===r.id?"border-primary bg-gray-800 text-white":"border-transparent text-gray-300 hover:bg-gray-800/50 hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx("input",{type:"checkbox",readOnly:!0,checked:r.completed,className:"form-checkbox h-4 w-4 text-primary bg-gray-700 border-gray-600 rounded mr-3"}),e.jsx("span",{className:"truncate",children:r.title})]}),e.jsx("span",{className:"text-xs text-gray-400 shrink-0",children:k(r.duration)})]})},r.id)))]},s.id)})})]})]})]})]})}export{E as default};
