import{b as c,j as e,H as u,r as g,e as y}from"./app-Cp24Tua5.js";import{G as b}from"./GuestLayout-BDbU-vG_.js";import"./Toast-_0vFKl4S.js";function k({course:t,flutterwavePublicKey:d}){const[i,h]=c.useState(route().params.email||""),[n,p]=c.useState(""),[o,l]=c.useState(!1),f=async a=>{var m,x;a.preventDefault(),l(!0);try{const r=await y.post(route("payment.initialize",t.slug),{email:i,phone:n});if(r.data.success){const s=r.data.payment_data;FlutterwaveCheckout({public_key:d,tx_ref:s.tx_ref,amount:s.amount,currency:s.currency,payment_options:"card,mobilemoney,ussd,banktransfer",redirect_url:s.redirect_url,customer:s.customer,customizations:s.customizations,meta:s.meta,callback:function(j){},onclose:function(){l(!1)}})}}catch(r){l(!1),alert(((x=(m=r.response)==null?void 0:m.data)==null?void 0:x.message)||"Failed to initialize payment. Please try again.")}};return e.jsxs(b,{children:[e.jsx(u,{title:`Checkout - ${t.title}`}),e.jsx("script",{src:"https://checkout.flutterwave.com/v3.js"}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"Complete Your Purchase"}),e.jsx("p",{className:"mt-2 text-gray-600 font-lato",children:"You're one step away from accessing this amazing course"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat",children:"Order Summary"}),e.jsxs("div",{className:"flex gap-4",children:[t.thumbnail_path&&e.jsx("img",{src:`/storage/${t.thumbnail_path}`,alt:t.title,className:"w-32 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 font-montserrat",children:t.title}),t.subtitle&&e.jsx("p",{className:"text-sm text-gray-600 font-lato",children:t.subtitle}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-lato",children:["by ",t.instructor.name]}),e.jsx("p",{className:"text-sm text-primary mt-1 font-lato",children:t.category.name})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-primary font-montserrat",children:["$",Number(t.price).toFixed(2)]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat",children:"Payment Details"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1 font-montserrat",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",required:!0,value:i,onChange:a=>h(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato",placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1 font-montserrat",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",id:"phone",value:n,onChange:a=>p(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato",placeholder:"+1234567890"})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary text-white py-3 px-6 rounded-lg font-semibold hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-montserrat",children:o?"Processing...":`Pay $${Number(t.price).toFixed(2)}`})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 text-center mb-3 font-lato",children:"Secure payment powered by Flutterwave"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("i",{className:"fab fa-cc-visa text-3xl text-gray-400"}),e.jsx("i",{className:"fab fa-cc-mastercard text-3xl text-gray-400"}),e.jsx("i",{className:"fas fa-university text-3xl text-gray-400"}),e.jsx("i",{className:"fas fa-mobile-alt text-3xl text-gray-400"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4 font-montserrat",children:"After Purchase"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Instant access to all course content"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Lifetime access to the course"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Certificate of completion"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"30-day money-back guarantee"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("button",{onClick:()=>g.visit(route("courses.show",t.slug)),className:"w-full text-primary hover:text-primary-dark font-semibold text-sm font-montserrat",children:"‚Üê Back to Course"})})]})})]})]})})]})}export{k as default};
