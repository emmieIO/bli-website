import{b as d,r as T,j as e,H as A,L as c}from"./app-dlBkKBo2.js";import{V as z}from"./VimeoPlayer-DZwcX7Tt.js";import{c as P}from"./createLucideIcon-C6S8Ai1L.js";import{F as w}from"./file-text-BPtTVwxs.js";import{C as k,a as f}from"./chevron-right-C9Z38oJw.js";import{M as F}from"./menu-CNsMAQQV.js";import{C as H}from"./circle-check-big-35Yliyrn.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],C=P("circle-play",R);function Y({course:a,currentLesson:t,previousLesson:b,nextLesson:p,progress:j}){var N;const[o,_]=d.useState("overview"),[m,n]=d.useState([]),[h,u]=d.useState(!0),[v,y]=d.useState((t==null?void 0:t.completed)||!1);d.useEffect(()=>{if(a.modules&&a.modules.length>0&&m.length===0){const l=a.modules.find(i=>{var r;return(r=i.lessons)==null?void 0:r.some(s=>s.id===(t==null?void 0:t.id))});l?n([l.id]):a.modules[0]&&n([a.modules[0].id])}},[a.modules,t]),d.useEffect(()=>{y((t==null?void 0:t.completed)||!1)},[t]);const $=l=>{n(i=>i.includes(l)?i.filter(r=>r!==l):[...i,l])},S=l=>{if(!l)return"...";if(typeof l=="string")return l;const i=Math.floor(l/60),r=Math.floor(l%60);return`${i}:${r.toString().padStart(2,"0")}`},g=d.useCallback(()=>{!t||v||T.post(route("courses.lessons.complete",{course:a.slug,lesson:t.id}),{},{preserveScroll:!0,onSuccess:()=>{y(!0)}})},[t,v,a.slug]),M=l=>l?l.startsWith("http")?l:`/storage/${l}`:"",E=d.useMemo(()=>t?t.type==="pdf"&&t.content_path?e.jsx("iframe",{src:M(t.content_path),className:"w-full h-full rounded-xl border border-slate-700",title:t.title}):t.type==="text"?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-slate-900 text-slate-300 p-12 text-center rounded-xl border border-slate-800",children:[e.jsx(w,{className:"w-20 h-20 mb-6 text-slate-600"}),e.jsx("h3",{className:"text-2xl font-semibold text-white mb-3",children:t.title}),e.jsx("p",{className:"max-w-md text-slate-400",children:"This lesson contains reading material. Please refer to the description below."})]}):t.vimeo_id||t.video_url&&(t.video_url.includes("vimeo.com")||t.video_url.includes("player.vimeo.com"))?e.jsx("div",{className:"w-full h-full rounded-xl overflow-hidden bg-black shadow-2xl border border-slate-800",children:e.jsx(z,{videoId:t.vimeo_id,videoUrl:t.video_url,onEnded:g,autoplay:!1})}):t.video_url?e.jsxs("video",{className:"w-full h-full rounded-xl bg-black shadow-2xl border border-slate-800",controls:!0,preload:"metadata",poster:"/images/video-placeholder.jpg",onEnded:g,children:[e.jsx("source",{src:t.video_url,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-400 bg-slate-900 rounded-xl border border-slate-800",children:[e.jsx(AlertCircle,{className:"w-12 h-12 mb-3 text-yellow-500/50"}),e.jsx("p",{children:"No media content available for this lesson."})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-400 bg-slate-900 rounded-xl border border-slate-800",children:[e.jsx(C,{className:"w-16 h-16 mb-4 opacity-20"}),e.jsx("p",{children:"Select a lesson to begin your learning journey."})]}),[t,g]);return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:`${(t==null?void 0:t.title)||"Learn"} - ${a.title}`}),e.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-900 font-sans selection:bg-indigo-500 selection:text-white",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50 h-16",children:e.jsxs("div",{className:"h-full px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[e.jsx(c,{href:route("courses.show",a.slug),className:"p-2 -ml-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",title:"Back to Course Details",children:e.jsx(k,{className:"w-5 h-5"})}),e.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),e.jsx("h1",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate tracking-tight",children:a.title})]}),e.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[e.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[e.jsx("div",{className:"w-32 h-2 bg-gray-300 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500 ease-out rounded-full",style:{width:`${j}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-indigo-600 whitespace-nowrap",children:[Math.round(j),"%"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>u(!h),className:`p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors ${h?"bg-gray-100 text-gray-700":""}`,"aria-label":"Toggle Sidebar",children:e.jsx(F,{className:"w-5 h-5"})})})]})]})}),e.jsxs("div",{className:"flex h-[calc(100vh-4rem)] overflow-hidden",children:[e.jsx("main",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"aspect-video w-full mb-8",children:E}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-8 border-b border-gray-200 pb-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2 tracking-tight leading-tight",children:t==null?void 0:t.title}),(t==null?void 0:t.subtitle)&&e.jsx("p",{className:"text-lg text-gray-600",children:t.subtitle})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[b&&e.jsxs(c,{href:route("courses.learn",{course:a.slug,lesson:b.id}),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 hover:text-gray-900 rounded-lg transition-all border border-gray-300",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),p&&e.jsxs(c,{href:route("courses.learn",{course:a.slug,lesson:p.id}),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 shadow-lg shadow-indigo-500/20 rounded-lg transition-all",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next Lesson"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),e.jsx(f,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-6 border-b border-gray-200 mb-6",children:["overview","resources","notes"].map(l=>e.jsx("button",{onClick:()=>_(l),className:`pb-4 text-sm font-medium border-b-2 transition-colors capitalize ${o===l?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:l},l))}),e.jsxs("div",{className:"prose max-w-none",children:[o==="overview"&&(t!=null&&t.description?e.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}}):e.jsx("p",{className:"text-gray-500 italic",children:"No description provided for this lesson."})),o==="resources"&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:e.jsx("p",{className:"text-gray-700",children:"No resources attached to this lesson."})}),o==="notes"&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:e.jsx("p",{className:"text-gray-700",children:"Notes feature coming soon."})})]})]})]})}),e.jsxs("aside",{className:`
                                        fixed inset-y-0 right-0 z-40 w-80 bg-white border-l border-gray-200 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 flex flex-col
                                        ${h?"translate-x-0":"translate-x-full lg:hidden"}
                                    `,children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 flex items-center justify-between bg-white",children:[e.jsx("h3",{className:"font-semibold text-gray-900 tracking-tight",children:"Course Content"}),e.jsx("button",{onClick:()=>u(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:e.jsx(f,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:(N=a.modules)==null?void 0:N.map((l,i)=>{var r;return e.jsxs("div",{className:"border-b border-gray-200/50 last:border-0",children:[e.jsx("button",{onClick:()=>$(l.id),className:"w-full text-left px-5 py-4 hover:bg-gray-50 transition-colors group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-0.5",children:["Section ",i+1]}),e.jsx("h4",{className:"text-sm font-medium text-gray-800 group-hover:text-gray-900 transition-colors line-clamp-2",children:l.title})]}),e.jsx(f,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 mt-1 ${m.includes(l.id)?"rotate-90":""}`})]})}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${m.includes(l.id)?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"bg-gray-50/30 pb-2",children:(r=l.lessons)==null?void 0:r.map(s=>{const x=(t==null?void 0:t.id)===s.id;return e.jsxs(c,{href:route("courses.learn",{course:a.slug,lesson:s.id}),className:`
                                                                        group flex items-start gap-3 px-5 py-3 text-sm transition-all border-l-2
                                                                        ${x?"bg-indigo-500/10 border-indigo-500 text-indigo-700":"border-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
                                                                    `,children:[e.jsx("div",{className:`mt-0.5 shrink-0 ${s.completed?"text-emerald-600":x?"text-indigo-600":"text-gray-400"}`,children:s.completed?e.jsx(H,{className:"w-4 h-4"}):x?e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current relative",children:e.jsx("div",{className:"absolute inset-0 m-auto w-1.5 h-1.5 rounded-full bg-current"})}):e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`truncate ${x?"font-medium text-indigo-700":"group-hover:text-gray-900"}`,children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5 flex items-center gap-1",children:[s.type==="video"?e.jsx(C,{className:"w-3 h-3"}):e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:S(s.duration)})]})]})]},s.id)})})})]},l.id)})})]})]})]})]})}export{Y as default};
