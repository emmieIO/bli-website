import{u as k,b as o,j as e,H as S,r as P,e as _}from"./app-BK-9xs24.js";import{G as D}from"./GuestLayout-CGJmdPQw.js";import{D as x}from"./index-B7mgmw7u.js";import"./Toast-hZvgDEB_.js";function L({event:t,paystackPublicKey:C}){var y;const{auth:m}=k().props,s=m==null?void 0:m.user,N=((y=x().params)==null?void 0:y.email)||"",[u,i]=o.useState(""),[g,n]=o.useState(N),[p,c]=o.useState(""),[f,d]=o.useState(!1),[r,h]=o.useState(!1);o.useEffect(()=>{s&&(i(s.name||""),n(s.email||""),c(s.phone||""),h(!0))},[s]);const v=a=>{h(a),a&&s?(i(s.name||""),n(s.email||""),c(s.phone||"")):(i(""),n(""),c(""))},w=async a=>{var b,j;a.preventDefault(),d(!0);try{const l=await _.post(x("payment.event.initialize",t.slug),{name:u,email:g,phone:p});l.data.success&&l.data.payment_data.data.authorization_url?window.location.href=l.data.payment_data.data.authorization_url:(alert(l.data.message||"Failed to initialize payment"),d(!1))}catch(l){d(!1),alert(((j=(b=l.response)==null?void 0:b.data)==null?void 0:j.message)||"Failed to initialize payment. Please try again.")}};return e.jsxs(D,{children:[e.jsx(S,{title:`Checkout - ${t.title}`}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"Complete Your Registration"}),e.jsx("p",{className:"mt-2 text-gray-600 font-lato",children:"Secure your spot for this event"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat",children:"Order Summary"}),e.jsxs("div",{className:"flex gap-4",children:[t.program_cover&&e.jsx("img",{src:`/storage/${t.program_cover}`,alt:t.title,className:"w-32 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 font-montserrat",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 font-lato mt-1",children:new Date(t.start_date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-lato",children:[t.mode," • ",t.location]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-primary font-montserrat",children:["₦",Number(t.entry_fee).toLocaleString()]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Payment Details"}),s&&e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-600 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:a=>v(a.target.checked),className:"rounded text-primary focus:ring-primary border-gray-300"}),e.jsx("span",{className:"font-lato",children:"Use my profile details"})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1 font-montserrat",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",required:!0,value:u,onChange:a=>i(a.target.value),disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1 font-montserrat",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",required:!0,value:g,onChange:a=>n(a.target.value),disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1 font-montserrat",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",id:"phone",value:p,onChange:a=>c(a.target.value),disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"+1234567890"})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary text-white py-3 px-6 rounded-lg font-semibold hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-montserrat",children:f?"Processing...":`Pay ₦${Number(t.entry_fee).toLocaleString()}`})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 text-center mb-3 font-lato",children:"Secure payment powered by Paystack"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("i",{className:"fab fa-cc-visa text-3xl text-gray-400"}),e.jsx("i",{className:"fab fa-cc-mastercard text-3xl text-gray-400"}),e.jsx("i",{className:"fas fa-university text-3xl text-gray-400"}),e.jsx("i",{className:"fas fa-mobile-alt text-3xl text-gray-400"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4 font-montserrat",children:"Registration Benefits"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Guaranteed seat reservation"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Event materials and resources"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Networking opportunities"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("button",{onClick:()=>P.visit(x("events.show",t.slug)),className:"w-full text-primary hover:text-primary-700 font-semibold text-sm font-montserrat",children:"← Back to Event"})})]})})]})]})})]})}export{L as default};
