import{u as M,b as n,j as e,H as D,L as N,r as y}from"./app-BridyfqS.js";import{D as L}from"./DashboardLayout-CCl7ZrlX.js";import{B as f}from"./Button-Bl40KT5k.js";import"./Toast-DOjW4aYe.js";import"./createLucideIcon-bhtpcbNH.js";import"./index-B7mgmw7u.js";import"./menu-BnuQFevd.js";import"./house-yZ98mo7I.js";import"./shopping-cart-CzVCEO43.js";import"./user-BZ7pCGjP.js";import"./book-open-CcDF0B8d.js";function J({users:a,roles:r}){const{sideLinks:i}=M().props,[o,c]=n.useState(!1),[l,x]=n.useState(null),[v,g]=n.useState(!1),[w,h]=n.useState(!1),[m,b]=n.useState(null),[u,p]=n.useState(""),[S,j]=n.useState(!1),R=async()=>{if(o){c(!1);return}g(!0);try{const t=await(await fetch(route("admin.users.statistics"))).json();x(t),c(!0)}catch{c(!1)}finally{g(!1)}},C=s=>{var t;b(s),p(((t=s.roles[0])==null?void 0:t.name)||""),h(!0)},U=s=>{s.preventDefault(),!(!m||!u)&&(j(!0),y.post(route("admin.users.assign-role",m.id),{role:u},{preserveScroll:!0,onFinish:()=>{j(!1),h(!1),b(null),p("")}}))},A=(s,t)=>{confirm(`Remove ${t} role from ${s.name}?`)&&y.delete(route("admin.users.remove-role",[s.id,t]),{preserveScroll:!0})},k=s=>({admin:"bg-red-100 text-red-800",instructor:"bg-green-100 text-green-800",student:"bg-blue-100 text-blue-800"})[s]||"bg-gray-100 text-gray-800";return e.jsxs(L,{sideLinks:i,children:[e.jsx(D,{title:"User Management - Beacon Leadership Institute"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 font-montserrat",children:"User Management"}),e.jsx("p",{className:"text-gray-600 font-lato",children:"Manage user accounts and assign roles to control access permissions."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{onClick:R,variant:"secondary",icon:"chart-bar",loading:v,className:"bg-gray-600 hover:bg-gray-700 text-white",children:"User Statistics"}),e.jsxs(N,{href:route("admin.roles.index"),className:"inline-flex items-center gap-2 bg-primary hover:bg-primary-600 py-3 px-6 rounded-lg font-medium text-white transition-all duration-200 shadow-sm font-montserrat",children:[e.jsx("i",{className:"fas fa-shield-alt w-4 h-4"}),e.jsx("span",{children:"Manage Roles"})]})]})]}),o&&l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsx(d,{icon:"users",label:"Total Users",value:l.total_users,color:"blue"}),e.jsx(d,{icon:"shield-alt",label:"Admins",value:l.admins,color:"red"}),e.jsx(d,{icon:"graduation-cap",label:"Instructors",value:l.instructors,color:"green"}),e.jsx(d,{icon:"book-open",label:"Students",value:l.students,color:"purple"}),e.jsx(d,{icon:"user-slash",label:"No Role",value:l.users_without_roles,color:"yellow"})]}),e.jsx("div",{className:"relative overflow-x-auto shadow-lg rounded-xl bg-white border border-gray-200",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[e.jsx("thead",{className:"text-xs text-gray-600 uppercase bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"User Details"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Current Role"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Registration Date"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold font-montserrat",children:"Actions"})]})}),e.jsx("tbody",{children:a.data.length>0?a.data.map(s=>e.jsxs("tr",{className:"bg-white border-b border-gray-100 hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-primary-700 font-montserrat",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 font-montserrat",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 font-lato",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:s.roles.length>0?s.roles.map(t=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium font-montserrat ${k(t.name)}`,children:t.name.charAt(0).toUpperCase()+t.name.slice(1)},t.id)):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 font-montserrat",children:"No Role"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-gray-700 font-lato",children:new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(s),className:"inline-flex items-center justify-center w-8 h-8 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors duration-200",title:"Assign Role",children:e.jsx("i",{className:"fas fa-user-cog w-4 h-4"})}),s.roles.length>0&&e.jsx("button",{onClick:()=>A(s,s.roles[0].name),className:"inline-flex items-center justify-center w-8 h-8 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Remove Role",children:e.jsx("i",{className:"fas fa-user-minus w-4 h-4"})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("i",{className:"fas fa-users w-12 h-12 text-gray-300 mb-4"}),e.jsx("p",{className:"font-lato",children:"No users found"})]})})})})]})}),a.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(_,{links:a.links})}),w&&m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsx("div",{className:"relative p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-montserrat",children:"Assign Role"}),e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 font-lato",children:"User"}),e.jsx("p",{className:"text-gray-900 font-semibold font-montserrat",children:m.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2 font-lato",children:"Role"}),e.jsxs("select",{name:"role",id:"role",value:u,onChange:s=>p(s.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 font-lato",children:[e.jsx("option",{value:"",children:"Select a role"}),r.map(s=>e.jsx("option",{value:s.name,children:s.name.charAt(0).toUpperCase()+s.name.slice(1)},s.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(f,{type:"button",variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx(f,{type:"submit",loading:S,children:"Assign Role"})]})]})]})})})]})}function d({icon:a,label:r,value:i,color:o}){const c={blue:{bg:"bg-blue-100",text:"text-blue-600"},red:{bg:"bg-red-100",text:"text-red-600"},green:{bg:"bg-green-100",text:"text-green-600"},purple:{bg:"bg-purple-100",text:"text-purple-600"},yellow:{bg:"bg-yellow-100",text:"text-yellow-600"}},{bg:l,text:x}=c[o]||c.blue;return e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 ${l} rounded-lg`,children:e.jsx("i",{className:`fas fa-${a} w-6 h-6 ${x}`})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 font-lato",children:r}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 font-montserrat",children:i})]})]})})}function _({links:a}){return e.jsx("nav",{className:"flex gap-1",children:a.map((r,i)=>{const o=r.label.replace("&laquo; Previous","«").replace("Next &raquo;","»");return r.url?e.jsx(N,{href:r.url,className:`px-3 py-2 text-sm rounded-lg transition-colors font-lato ${r.active?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,preserveScroll:!0,children:o},i):e.jsx("span",{className:"px-3 py-2 text-sm text-gray-400 cursor-not-allowed font-lato",children:o},i)})})}export{J as default};
