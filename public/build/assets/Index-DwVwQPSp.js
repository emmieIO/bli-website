import{u as h,j as e,H as p,L as f,a as c}from"./app-jgboj4cM.js";import{D as u}from"./DashboardLayout-Be8NwqFD.js";import"./Toast-BVSuYdEZ.js";function v({roles:s,permissions:d}){const{sideLinks:n}=h().props,o=(a,l,t)=>{const r=t?"remove":"add",i=`${r==="add"?"Grant":"Remove"} "${l}" permission ${r==="add"?"to":"from"} ${a} role?`;confirm(i)&&c.post(route("admin.roles.toggle-permission"),{role:a,permission:l,action:r},{preserveScroll:!0})},m=()=>{confirm("Are you sure you want to reset all roles to their default permissions? This action cannot be undone.")&&c.post(route("admin.roles.reset-defaults"),{},{preserveScroll:!0})},x=()=>{c.get(route("admin.roles.audit-log"),{},{preserveScroll:!0})};return e.jsxs(u,{sideLinks:n,children:[e.jsx(p,{title:"Roles & Permissions - Beacon Leadership Institute"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 font-montserrat",children:"Role & Permission Management"}),e.jsx("p",{className:"text-gray-600 font-lato",children:"Configure roles and their associated permissions to control system access."})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(f,{href:route("admin.users.index"),className:"inline-flex items-center gap-2 bg-gray-600 hover:bg-gray-700 py-3 px-6 rounded-lg font-medium text-white transition-all duration-200 shadow-sm font-montserrat",children:[e.jsx("i",{className:"fas fa-users w-4 h-4"}),e.jsx("span",{children:"Manage Users"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:s.map(a=>e.jsx(b,{role:a},a.id))}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 font-montserrat",children:"Permission Matrix"}),e.jsx("p",{className:"text-gray-600 mt-1 font-lato",children:"Manage detailed permissions for each role"})]}),e.jsx("div",{className:"p-6",children:Object.entries(d).map(([a,l])=>e.jsxs("div",{className:"mb-8 last:mb-0",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 capitalize font-montserrat",children:[a.replace(/[_-]/g," ")," Permissions"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600 w-1/3 font-montserrat",children:"Permission"}),s.map(t=>e.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-600 font-montserrat",children:t.name.charAt(0).toUpperCase()+t.name.slice(1)},t.id))]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 font-lato",children:t.name.replace(/[_-]/g," ").split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 font-lato",children:t.name})]})}),s.map(r=>{const i=r.permissions.some(g=>g.name===t.name);return e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("button",{onClick:()=>o(r.name,t.name,i),className:`w-6 h-6 rounded ${i?"bg-green-500 text-white":"bg-gray-200 text-gray-400"} hover:scale-110 transition-all duration-200`,title:i?"Remove permission":"Grant permission",children:e.jsx("i",{className:`fas fa-${i?"check":"times"} w-4 h-4`})})},r.id)})]},t.id))})]})})]},a))})]}),e.jsxs("div",{className:"mt-8 bg-gray-50 rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 font-montserrat",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:m,className:"flex items-center justify-center gap-2 px-4 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors font-montserrat",children:[e.jsx("i",{className:"fas fa-undo w-4 h-4"}),"Reset to Defaults"]}),e.jsxs("a",{href:route("admin.roles.export"),className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors font-montserrat",children:[e.jsx("i",{className:"fas fa-download w-4 h-4"}),"Export Configuration"]}),e.jsxs("button",{onClick:x,className:"flex items-center justify-center gap-2 px-4 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors font-montserrat",children:[e.jsx("i",{className:"fas fa-clock w-4 h-4"}),"View Audit Log"]})]})]})]})}function b({role:s}){const n=(o=>({admin:{bg:"bg-red-50",icon:"bg-red-100",text:"text-red-800",iconColor:"text-red-600"},instructor:{bg:"bg-green-50",icon:"bg-green-100",text:"text-green-800",iconColor:"text-green-600"},student:{bg:"bg-blue-50",icon:"bg-blue-100",text:"text-blue-800",iconColor:"text-blue-600"}})[o]||{bg:"bg-gray-50",icon:"bg-gray-100",text:"text-gray-800",iconColor:"text-gray-600"})(s.name);return e.jsx("div",{className:`bg-white rounded-xl border border-gray-200 shadow-sm ${n.bg}`,children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 ${n.icon} rounded-lg`,children:e.jsx("i",{className:`fas fa-shield-alt w-6 h-6 ${n.iconColor}`})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("h3",{className:`text-lg font-semibold ${n.text} font-montserrat`,children:[s.name.charAt(0).toUpperCase()+s.name.slice(1)," Role"]}),e.jsxs("p",{className:"text-sm text-gray-600 font-lato",children:[s.permissions.length," permissions"]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 font-montserrat",children:"Key Permissions:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.permissions.slice(0,4).map(o=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-white text-gray-600 font-lato",children:o.name.replace(/[-_]/g," ")},o.id)),s.permissions.length>4&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-200 text-gray-600 font-lato",children:["+",s.permissions.length-4," more"]})]})]})]})})}export{v as default};
