import{u as k,b as i,j as e,H as P,r as S,e as C}from"./app-BK-9xs24.js";import{G as D}from"./GuestLayout-CGJmdPQw.js";import{D as x}from"./index-B7mgmw7u.js";import"./Toast-hZvgDEB_.js";function L({course:t,paystackPublicKey:_}){var y;const{auth:m}=k().props,s=m==null?void 0:m.user,N=((y=x().params)==null?void 0:y.email)||"",[h,n]=i.useState(""),[p,o]=i.useState(N),[f,c]=i.useState(""),[g,d]=i.useState(!1),[r,u]=i.useState(!1);i.useEffect(()=>{s&&(n(s.name||""),o(s.email||""),c(s.phone||""),u(!0))},[s]);const v=a=>{u(a),a&&s?(n(s.name||""),o(s.email||""),c(s.phone||"")):(n(""),o(""),c(""))},w=async a=>{var b,j;a.preventDefault(),d(!0);try{const l=await C.post(x("payment.initialize",t.slug),{name:h,email:p,phone:f});l.data.success&&l.data.payment_data.data.authorization_url?window.location.href=l.data.payment_data.data.authorization_url:(alert(l.data.message||"Failed to initialize payment"),d(!1))}catch(l){d(!1),alert(((j=(b=l.response)==null?void 0:b.data)==null?void 0:j.message)||"Failed to initialize payment. Please try again.")}};return e.jsxs(D,{children:[e.jsx(P,{title:`Checkout - ${t.title}`}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat",children:"Complete Your Purchase"}),e.jsx("p",{className:"mt-2 text-gray-600 font-lato",children:"You're one step away from accessing this amazing course"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4 font-montserrat",children:"Order Summary"}),e.jsxs("div",{className:"flex gap-4",children:[t.thumbnail_path&&e.jsx("img",{src:`/storage/${t.thumbnail_path}`,alt:t.title,className:"w-32 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 font-montserrat",children:t.title}),t.subtitle&&e.jsx("p",{className:"text-sm text-gray-600 font-lato",children:t.subtitle}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-lato",children:["by ",t.instructor.name]}),e.jsx("p",{className:"text-sm text-primary mt-1 font-lato",children:t.category.name})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-bold text-primary font-montserrat",children:["₦",Number(t.price).toLocaleString()]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Payment Details"}),s&&e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-600 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:a=>v(a.target.checked),className:"rounded text-primary focus:ring-primary border-gray-300"}),e.jsx("span",{className:"font-lato",children:"Use my profile details"})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1 font-montserrat",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",required:!0,value:h,onChange:a=>n(a.target.value),disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1 font-montserrat",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",required:!0,value:p,onChange:a=>o(a.target.value),disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1 font-montserrat",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",id:"phone",value:f,onChange:a=>c(a.target.value),disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent font-lato ${r?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"+1234567890"})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-primary text-white py-3 px-6 rounded-lg font-semibold hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-montserrat",children:g?"Processing...":`Pay ₦${Number(t.price).toLocaleString()}`})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 text-center mb-3 font-lato",children:"Secure payment powered by Paystack"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("i",{className:"fab fa-cc-visa text-3xl text-gray-400"}),e.jsx("i",{className:"fab fa-cc-mastercard text-3xl text-gray-400"}),e.jsx("i",{className:"fas fa-university text-3xl text-gray-400"}),e.jsx("i",{className:"fas fa-mobile-alt text-3xl text-gray-400"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4 font-montserrat",children:"After Purchase"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Instant access to all course content"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Lifetime access to the course"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"Certificate of completion"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1"}),e.jsx("span",{className:"text-sm text-gray-700 font-lato",children:"30-day money-back guarantee"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("button",{onClick:()=>S.visit(x("courses.show",t.slug)),className:"w-full text-primary hover:text-primary-700 font-semibold text-sm font-montserrat",children:"← Back to Course"})})]})})]})]})})]})}export{L as default};
