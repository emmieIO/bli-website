import{u as R,b as m,j as e,H as E,L as N,r as d}from"./app-CqkxuMnu.js";import{D as O}from"./DashboardLayout-DVZa3Sfd.js";import{C as $}from"./ConfirmModal-Dy9aCF48.js";import"./Toast-BKhPWWBu.js";import"./createLucideIcon-CnZdIfxq.js";import"./index-B7mgmw7u.js";import"./menu-BfJ64mgK.js";import"./house-DB_cw12w.js";import"./shopping-cart-B_msq-yD.js";import"./user-DxvuZ2tn.js";import"./book-open-kdcru23r.js";function W({course:l}){var b,j;const{sideLinks:w,errors:a}=R().props,[c,p]=m.useState(""),[u,g]=m.useState(""),[x,f]=m.useState(""),[y,v]=m.useState([]),[h,i]=m.useState(!1),[r,n]=m.useState({show:!1,type:null,id:null}),S=t=>{v(s=>s.includes(t)?s.filter(o=>o!==t):[...s,t])},k=t=>{t.preventDefault(),c.trim()&&(i(!0),d.post(route("admin.requirements.store",l.slug),{requirement:c},{preserveScroll:!0,onSuccess:()=>{p("")},onFinish:()=>{i(!1)}}))},C=t=>{n({show:!0,type:"requirement",id:t,title:"Delete Requirement"})},D=t=>{t.preventDefault(),u.trim()&&(i(!0),d.post(route("admin.outcomes.store",l.slug),{outcome:u},{preserveScroll:!0,onSuccess:()=>{g("")},onFinish:()=>{i(!1)}}))},q=t=>{n({show:!0,type:"outcome",id:t,title:"Delete Learning Outcome"})},M=t=>{t.preventDefault(),x.trim()&&(i(!0),d.post(route("admin.modules.store",l.slug),{title:x},{preserveScroll:!0,onSuccess:()=>{f("")},onFinish:()=>{i(!1)}}))},A=(t,s,o)=>{n({show:!0,type:"lesson",id:s,moduleSlug:t,lessonSlug:s,title:`Delete Lesson: ${o}`})},L=(t,s)=>{const o=prompt("Edit Module Title:",s);!o||o.trim()===""||o===s||(i(!0),d.put(route("admin.modules.update",[l.slug,t]),{title:o.trim()},{preserveScroll:!0,onFinish:()=>{i(!1)}}))},T=(t,s)=>{n({show:!0,type:"module",id:t,moduleSlug:t,title:`Delete Module: ${s}`})},F=()=>{if(!(!r.id||!r.type))switch(i(!0),r.type){case"requirement":d.delete(route("admin.requirements.destroy",[l.slug,r.id]),{preserveScroll:!0,onFinish:()=>{i(!1),n({show:!1,type:null,id:null})}});break;case"outcome":d.delete(route("admin.outcomes.destroy",[l.slug,r.id]),{preserveScroll:!0,onFinish:()=>{i(!1),n({show:!1,type:null,id:null})}});break;case"module":d.delete(route("admin.modules.destroy",[l.slug,r.moduleSlug]),{preserveScroll:!0,onFinish:()=>{i(!1),n({show:!1,type:null,id:null})}});break;case"lesson":r.moduleSlug&&r.lessonSlug&&d.delete(route("admin.lessons.destroy",[r.moduleSlug,r.lessonSlug]),{preserveScroll:!0,onFinish:()=>{i(!1),n({show:!1,type:null,id:null})}});break}},_=t=>{switch(t){case"video":return"ðŸŽ¥";case"pdf":return"ðŸ“„";case"link":return"ðŸ”—";default:return"ðŸ“"}};return e.jsxs(O,{sideLinks:w,children:[e.jsx(E,{title:`Course Builder - ${l.title}`}),e.jsxs("div",{className:"px-4 md:px-6 py-6",children:[e.jsxs("div",{className:"mb-8 p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:l.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:l.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Level:"})," ",l.level||"Beginner"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",((b=l.category)==null?void 0:b.name)||"Uncategorized"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Instructor:"})," ",((j=l.instructor)==null?void 0:j.name)||"N/A"]}),l.thumbnail_path&&e.jsx("div",{children:e.jsx("img",{src:`/storage/${l.thumbnail_path}`,alt:"Thumbnail",className:"h-24 w-24 object-cover rounded mt-2"})})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(N,{href:route("admin.courses.index"),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:ring-gray-200",children:"â† Back to Courses"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-5 self-start",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Course Requirements"}),e.jsx("ul",{className:"space-y-2 mb-4",children:l.requirements&&l.requirements.length>0?l.requirements.map(t=>e.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-700 text-sm",children:t.requirement}),e.jsx("button",{onClick:()=>C(t.id),className:"text-gray-400 text-sm cursor-pointer flex items-center space-x-2 hover:text-red-600",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})})]},t.id)):e.jsx("li",{className:"text-sm text-gray-500 italic",children:"No requirements yet."})}),e.jsxs("form",{onSubmit:k,className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:c,onChange:t=>p(t.target.value),placeholder:"Add new requirement",className:"flex-1 rounded-lg border focus:ring-2 focus:ring-primary border-primary p-2 text-sm text-gray-900"}),e.jsx("button",{type:"submit",disabled:h||!c.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add"})]}),(a==null?void 0:a.requirement)&&e.jsx("span",{className:"text-red-600 text-xs mt-1 block",children:a.requirement})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-5 self-start",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Learning Outcomes"}),e.jsx("ul",{className:"space-y-2 mb-4",children:l.outcomes&&l.outcomes.length>0?l.outcomes.map(t=>e.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-700 text-sm",children:t.outcome}),e.jsx("button",{onClick:()=>q(t.id),className:"text-gray-400 text-sm cursor-pointer flex items-center space-x-2 hover:text-red-600",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})})]},t.id)):e.jsx("li",{className:"text-sm text-gray-500 italic",children:"No outcomes yet."})}),e.jsxs("form",{onSubmit:D,className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:u,onChange:t=>g(t.target.value),placeholder:"Add learning outcome",className:"flex-1 rounded-lg border focus:ring-2 focus:ring-primary border-primary p-2 text-sm text-gray-900"}),e.jsx("button",{type:"submit",disabled:h||!u.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add"})]}),(a==null?void 0:a.outcome)&&e.jsx("span",{className:"text-red-600 text-xs mt-1 block",children:a.outcome})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("form",{onSubmit:M,className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("input",{type:"text",value:x,onChange:t=>f(t.target.value),placeholder:"New Module Title",className:"w-full sm:w-auto flex-1 rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary focus:ring-primary"}),e.jsx("button",{type:"submit",disabled:h||!x.trim(),className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add Module"})]}),(a==null?void 0:a.title)&&e.jsx("small",{className:"mt-2 text-xs text-red-500 block",children:a.title})]}),e.jsx("div",{className:"space-y-6",children:l.modules&&l.modules.length>0?l.modules.map(t=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",onClick:()=>S(t.id),children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[y.includes(t.id)?e.jsx("i",{className:"fas fa-minus w-5 h-5 text-gray-500"}):e.jsx("i",{className:"fas fa-plus w-5 h-5 text-gray-500"}),e.jsxs("div",{className:"flex space-x-2",onClick:s=>s.stopPropagation(),children:[e.jsx(N,{href:route("admin.lessons.create",t.slug),className:"inline-flex cursor-pointer items-center px-3 py-1.5 text-sm font-medium text-gray-500 hover:text-primary rounded-lg",children:"+ Add Lesson"}),e.jsx("button",{onClick:()=>L(t.slug,t.title),className:"inline-flex cursor-pointer items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 rounded-lg",title:"Edit Module",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{onClick:()=>T(t.slug,t.title),className:"inline-flex cursor-pointer items-center px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 rounded-lg",title:"Delete Module",children:e.jsx("i",{className:"fas fa-trash"})})]})]})]}),y.includes(t.id)&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("ul",{className:"space-y-2",children:t.lessons&&t.lessons.length>0?t.lessons.map(s=>e.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-gray-700 font-bold",children:[_(s.type)," ",s.type.charAt(0).toUpperCase()+s.type.slice(1),": ",s.title]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.type==="video"&&e.jsx("a",{href:`/storage/${s.content_path}`,className:"text-green-500 hover:text-green-700 text-sm",children:"View"}),s.type==="pdf"&&e.jsx("a",{href:`/storage/${s.content_path}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-primary hover:underline text-sm",title:"View PDF",children:e.jsx("i",{className:"fas fa-file-pdf w-4 h-4"})}),s.type==="link"&&e.jsx("a",{href:s.content_path,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-primary hover:underline text-sm",children:e.jsx("i",{className:"fas fa-external-link-alt w-4 h-4"})}),e.jsx("button",{onClick:()=>A(t.slug,s.slug,s.title),className:"inline-flex items-center text-red-600 hover:text-red-800",title:"Delete Lesson",children:e.jsx("i",{className:"fas fa-trash w-4 h-4"})})]})]},s.id)):e.jsx("li",{className:"text-sm text-gray-500 italic",children:"No lessons yet."})})})]},t.id)):e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:"No modules yet. Add your first module above."})})]}),e.jsx($,{show:r.show,onClose:()=>n({show:!1,type:null,id:null}),onConfirm:F,title:r.title||"Confirm Delete",message:r.type==="module"?"Are you sure you want to delete this module? All lessons in this module will be deleted, including any video lessons which will be permanently removed from Vimeo. This action cannot be undone.":r.type==="lesson"?"Are you sure you want to delete this lesson? If this is a video lesson, the video will also be removed from Vimeo. This action cannot be undone.":"Are you sure you want to delete this item? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmButtonClass:"bg-red-600 hover:bg-red-700 text-white",icon:e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx("i",{className:"fas fa-trash text-red-600 text-xl"})}),isProcessing:h,processingText:"Deleting..."})]})}export{W as default};
