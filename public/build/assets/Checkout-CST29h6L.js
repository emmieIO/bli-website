import{u as y,b as l,j as e,H as f}from"./app-GBbDLcQe.js";import{G as g}from"./GuestLayout-C6b7OpiJ.js";import{c as b}from"./createLucideIcon-CBbYal5B.js";import{C as j}from"./credit-card-Dwd1h-AF.js";import{S as N}from"./shopping-cart-DR-AUMrS.js";import"./Toast-Ct3dcQLD.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],x=b("lock",v);function _({cart:s,paystackPublicKey:w}){const{auth:n}=y().props,[i,p]=l.useState(n.user.email||""),[c,u]=l.useState(n.user.phone||""),[m,r]=l.useState(!1),h=async t=>{var d;t.preventDefault(),r(!0);try{const o=await fetch(route("payment.cart.initialize"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({email:i,phone:c})}),a=await o.json();if(!o.ok){console.error("Payment initialization failed:",a),alert(a.message||"Failed to initialize payment"),r(!1);return}a.success&&a.payment_data.data.authorization_url?window.location.href=a.payment_data.data.authorization_url:(console.error("Payment data invalid:",a),alert(a.message||"Failed to initialize payment"),r(!1))}catch(o){console.error("Payment error:",o),alert("An error occurred. Please try again. Check console for details."),r(!1)}};return e.jsxs(g,{children:[e.jsx(f,{title:"Checkout"}),e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-montserrat mb-2",children:"Checkout"}),e.jsx("p",{className:"text-gray-600 font-lato",children:"Complete your purchase to start learning"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(x,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Payment Information"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",value:i,onChange:t=>p(t.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),e.jsx("input",{id:"phone",type:"tel",value:c,onChange:t=>u(t.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+1234567890"})]}),e.jsxs("button",{type:"submit",disabled:m,className:"w-full inline-flex items-center justify-center gap-2 px-6 py-4 bg-linear-to-r from-primary to-primary-600 text-white rounded-lg font-semibold font-montserrat hover:from-primary-600 hover:to-primary-700 transition-all duration-300 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(j,{className:"w-5 h-5"}),m?"Processing...":`Pay ₦${Number(s.total).toLocaleString()}`]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{children:"Secure payment powered by Paystack"})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(N,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 font-montserrat",children:"Order Summary"})]}),e.jsx("div",{className:"space-y-3 mb-6",children:s.items.map(t=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700 font-lato line-clamp-1",children:t.course.title}),e.jsxs("span",{className:"text-gray-900 font-medium shrink-0 ml-2",children:["₦",Number(t.price).toLocaleString()]})]},t.id))}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2 font-lato",children:[e.jsxs("span",{children:["Subtotal (",s.itemCount," ",s.itemCount>1?"courses":"course",")"]}),e.jsxs("span",{children:["₦",Number(s.total).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 font-montserrat",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-primary",children:["₦",Number(s.total).toLocaleString()]})]})]})]})})]})]})]})}export{_ as default};
