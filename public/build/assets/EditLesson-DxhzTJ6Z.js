import{u as D,b as o,j as e,H as S,L as g,r as P}from"./app-BAjAqRUi.js";import{D as E}from"./DashboardLayout-BlS-F4uH.js";import"./Toast-DJa5WsaD.js";import"./createLucideIcon-CS1CFp3a.js";import"./index-B7mgmw7u.js";import"./menu-PBSjiZy2.js";import"./house-zpz4_Bbb.js";import"./shopping-cart-B3unAk3h.js";import"./user-BB-YyFmu.js";import"./book-open-BRM3zQ1x.js";function $({module:l,lesson:a,lessontypes:h}){const{sideLinks:b,errors:t}=D().props,[c,m]=o.useState(!1),[s,p]=o.useState({title:a.title||"",type:a.type||"",description:a.description||"",is_preview:a.is_preview||!1,has_instruction:!!a.assignment_instructions,assignment_instructions:a.assignment_instructions||"",link_url:a.type==="link"&&a.content_path||""}),[u,y]=o.useState(null),[x,f]=o.useState(null),n=i=>{const{name:r,value:F,type:C}=i.target;if(C==="checkbox"){const d=i.target.checked;p(L=>({...L,[r]:d}))}else p(d=>({...d,[r]:F}))},j=i=>{i.target.files&&i.target.files[0]&&y(i.target.files[0])},_=i=>{i.target.files&&i.target.files[0]&&f(i.target.files[0])},v=i=>{i.preventDefault(),m(!0);const r=new FormData;r.append("title",s.title),r.append("type",s.type),r.append("description",s.description),r.append("_method","PUT"),s.is_preview&&r.append("is_preview","1"),s.has_instruction&&s.assignment_instructions&&(r.append("has_instruction","1"),r.append("assignment_instructions",s.assignment_instructions)),s.link_url&&r.append("link_url",s.link_url),s.type==="video"&&u&&r.append("video_field",u),s.type==="pdf"&&x&&r.append("content_path",x),P.post(route("instructor.courses.lessons.update",[l.course.slug,l.id,a.id]),r,{preserveScroll:!0,onFinish:()=>{m(!1)}})},N=s.type==="video",k=s.type==="pdf",w=s.type==="link";return e.jsxs(E,{sideLinks:b,children:[e.jsx(S,{title:`Edit Lesson: ${a.title}`}),e.jsxs("header",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Edit Lesson: ",a.title]}),e.jsx("p",{className:"text-gray-600",children:"Update lesson information and content."}),e.jsxs(g,{href:route("instructor.courses.builder",l.course.slug),className:"bg-white p-2.5 text-gray-800 border rounded-md my-1 inline-block hover:bg-gray-50 transition-colors",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Go back to builder"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block mb-2 text-sm font-medium text-gray-900",children:"Lesson Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:s.title,onChange:n,className:"bg-gray-50 border border-gray-300 focus:ring-primary focus:border-primary text-gray-900 text-sm rounded-lg block w-full p-2.5",required:!0}),(t==null?void 0:t.title)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block mb-2 text-sm font-medium text-gray-900",children:"Lesson Type"}),e.jsxs("select",{id:"type",name:"type",value:s.type,onChange:n,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block w-full p-2.5",required:!0,disabled:!0,children:[e.jsx("option",{value:"",children:"Choose a lesson type"}),h.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lesson type cannot be changed after creation."}),(t==null?void 0:t.type)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.type})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900",children:"Description"}),e.jsx("textarea",{name:"description",id:"description",rows:10,value:s.description,onChange:n,className:"bg-gray-50 border border-gray-300 resize-none text-gray-900 text-sm focus:ring-primary focus:border-primary rounded-lg block w-full p-2.5"}),(t==null?void 0:t.description)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.description})]}),N&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"video_lesson",className:"block mb-2 text-sm font-medium text-gray-900",children:["Video Resource ",a.vimeo_id&&e.jsx("span",{className:"text-xs text-gray-500",children:"(Currently: Vimeo video uploaded)"})]}),e.jsx("input",{type:"file",accept:".mp4,.mov,.mkv",name:"video_field",id:"video_lesson",onChange:j,className:"bg-gray-50 border border-gray-300 file:bg-primary text-gray-900 text-sm rounded-lg block w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to keep the current video. Uploading a new video will replace the existing one."}),(t==null?void 0:t.video_field)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.video_field}),e.jsxs("div",{className:"flex items-center mt-3 px-1",children:[e.jsx("input",{id:"is_preview",type:"checkbox",name:"is_preview",checked:s.is_preview,onChange:n,className:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-primary text-primary"}),e.jsx("label",{htmlFor:"is_preview",className:"ml-2 text-sm font-medium text-gray-900",children:"Is Preview?"})]})]}),k&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content_path",className:"block mb-2 text-sm font-medium text-gray-900",children:["PDF Resource File ",a.content_path&&e.jsx("span",{className:"text-xs text-gray-500",children:"(Current file exists)"})]}),e.jsx("input",{type:"file",name:"content_path",id:"content_path",accept:".pdf",onChange:_,className:"bg-gray-50 border border-gray-300 text-gray-900 focus:ring-primary focus:border-primary file:bg-primary text-sm rounded-lg block w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to keep the current PDF."}),(t==null?void 0:t.content_path)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.content_path})]}),w&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:"block mb-2 text-sm font-medium text-gray-900",children:"Resource Link"}),e.jsx("input",{type:"url",name:"link_url",id:"url",value:s.link_url,onChange:n,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5"}),(t==null?void 0:t.link_url)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.link_url})]}),e.jsxs("div",{className:"flex items-center mt-3 px-1",children:[e.jsx("input",{id:"has_instruction",type:"checkbox",name:"has_instruction",checked:s.has_instruction,onChange:n,className:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-primary text-primary"}),e.jsx("label",{htmlFor:"has_instruction",className:"ml-2 text-sm font-medium text-gray-900",children:"Has Instructions"})]}),s.has_instruction&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"assignment_instructions",className:"block mb-2 text-sm font-medium text-gray-900",children:"Assignment Instructions"}),e.jsx("textarea",{name:"assignment_instructions",id:"assignment_instructions",rows:4,value:s.assignment_instructions,onChange:n,className:"bg-gray-50 border resize-none border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5"}),(t==null?void 0:t.assignment_instructions)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.assignment_instructions})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(g,{href:route("instructor.courses.builder",l.course.slug),className:"flex-1 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 focus:ring-4 focus:outline-none focus:ring-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"flex-1 text-white bg-primary hover:bg-primary-600 focus:ring-4 focus:outline-none focus:ring-primary font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Updating..."]}):"Update Lesson"})]})]})})]})}export{$ as default};
