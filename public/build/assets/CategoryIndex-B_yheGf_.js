import{u as H,b as r,j as e,H as $,r as u}from"./app-Bc8u-Egx.js";import{D as R}from"./DashboardLayout-CQvMXsgG.js";import"./Toast-CI2zFTMv.js";import"./user-C8nIR6im.js";function V({categories:h}){const{sideLinks:E,errors:a}=H().props,[G,c]=r.useState(!1),[l,b]=r.useState({name:"",description:""}),[y,f]=r.useState(null),[j,N]=r.useState(!1),[P,d]=r.useState(!1),[i,w]=r.useState(null),[n,v]=r.useState({name:"",description:""}),[C,m]=r.useState(null),[S,k]=r.useState(!1),[_,o]=r.useState(!1),[x,D]=r.useState(null),[F,U]=r.useState(!1),I=t=>{const{name:s,value:g}=t.target;b(p=>({...p,[s]:g.toLowerCase()}))},A=t=>{t.target.files&&t.target.files[0]&&f(t.target.files[0])},z=t=>{t.preventDefault(),N(!0);const s=new FormData;s.append("name",l.name),s.append("description",l.description),y&&s.append("category_image",y),u.post(route("admin.category.store"),s,{preserveScroll:!0,onSuccess:()=>{c(!1),b({name:"",description:""}),f(null)},onFinish:()=>{N(!1)}})},T=t=>{w(t),v({name:t.name,description:t.description||""}),m(null),d(!0)},M=t=>{const{name:s,value:g}=t.target;v(p=>({...p,[s]:g.toLowerCase()}))},J=t=>{t.target.files&&t.target.files[0]&&m(t.target.files[0])},L=t=>{if(t.preventDefault(),!i)return;k(!0);const s=new FormData;s.append("name",n.name),s.append("description",n.description),s.append("_method","PUT"),C&&s.append("category_image",C),u.post(route("admin.category.update",i.slug),s,{preserveScroll:!0,onSuccess:()=>{d(!1),w(null),m(null)},onFinish:()=>{k(!1)}})},q=t=>{D(t),o(!0)},B=t=>{t.preventDefault(),x&&(U(!0),u.delete(route("admin.category.destroy",x.slug),{preserveScroll:!0,onSuccess:()=>{o(!1),D(null)},onFinish:()=>{U(!1)}}))};return e.jsxs(R,{sideLinks:E,children:[e.jsx($,{title:"Course Categories Administration"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:"Course Categories Administration"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Manage all course categories, add new ones, or update existing category details."}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center gap-2 bg-primary hover:bg-primary-600 py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 shadow-sm",children:[e.jsx("i",{className:"fas fa-folder-plus w-4 h-4"}),e.jsx("span",{children:"Create Category"})]})})]}),e.jsx("div",{className:"relative overflow-x-auto shadow-lg rounded-xl my-6 bg-white border border-gray-200",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-600",children:[e.jsx("thead",{className:"text-xs text-gray-600 uppercase bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold whitespace-nowrap",children:"Category Name"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold whitespace-nowrap",children:"Description"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold whitespace-nowrap",children:"Thumbnail Photo"}),e.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold whitespace-nowrap",children:"Actions"})]})}),e.jsx("tbody",{children:h.length>0?h.map(t=>e.jsxs("tr",{className:"bg-white border-b border-gray-100 hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap",children:t.name.charAt(0).toUpperCase()+t.name.slice(1)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:t.description?t.description.substring(0,50)+(t.description.length>50?"...":""):"N/A"}),e.jsx("td",{className:"px-6 py-4",children:t.image?e.jsx("img",{src:`/storage/${t.image}`,alt:t.name,className:"h-12 w-12 object-cover rounded-lg shadow-sm border border-gray-200"}):e.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-image w-5 h-5 text-gray-400"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(t),title:"Edit Category",className:"inline-flex items-center justify-center w-8 h-8 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors duration-200",children:e.jsx("i",{className:"fas fa-edit w-4 h-4"})}),e.jsx("button",{onClick:()=>q(t),title:"Delete Category",className:"inline-flex items-center justify-center w-8 h-8 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200",children:e.jsx("i",{className:"fas fa-trash-alt w-4 h-4"})})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-16 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 text-gray-400",children:[e.jsx("i",{className:"fas fa-folder-open w-12 h-12 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No categories found"}),e.jsx("p",{className:"max-w-md text-center",children:"Get started by creating your first category."})]})})})})]})}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl p-4 w-full max-w-md mx-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b rounded-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Course Category"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-400 bg-transparent hover:bg-gray-100 hover:text-gray-600 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center transition-colors",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})})]}),e.jsxs("form",{onSubmit:z,className:"p-4",children:[e.jsxs("div",{className:"grid gap-4 mb-4 grid-cols-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"create-name",className:"block mb-2 text-sm font-medium text-gray-700",children:"Category Name"}),e.jsx("input",{type:"text",name:"name",id:"create-name",value:l.name,onChange:I,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-3",placeholder:"Enter category name",required:!0}),(a==null?void 0:a.name)&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"create-category-image",className:"block mb-2 text-sm font-medium text-gray-700",children:"Category Image"}),e.jsx("input",{type:"file",id:"create-category-image",onChange:A,accept:"image/*",className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 file:bg-primary-600 file:text-white file:border-0 file:py-2 file:px-4 file:rounded-l-lg file:hover:bg-primary-700",required:!0}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload a category image (PNG, JPG, JPEG, or GIF, max 1MB)."}),(a==null?void 0:a.category_image)&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.category_image})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"create-description",className:"block mb-2 text-sm font-medium text-gray-700",children:"Category Description"}),e.jsx("textarea",{id:"create-description",name:"description",rows:4,value:l.description,onChange:I,className:"block p-3 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-primary-500 resize-none focus:border-primary-500",placeholder:"Enter category description..."}),(a==null?void 0:a.description)&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.description})]})]}),e.jsxs("button",{type:"submit",disabled:j,className:"text-white inline-flex items-center bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-200 font-medium rounded-lg text-sm px-6 py-3 text-center disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fas fa-plus-circle w-4 h-4 mr-2"}),j?"Creating...":"Create Category"]})]})]})}),P&&i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl p-4 w-full max-w-lg mx-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b rounded-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Course Category"}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-gray-400 bg-transparent hover:bg-gray-100 hover:text-gray-600 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center transition-colors",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})})]}),e.jsxs("form",{onSubmit:L,className:"p-4",children:[e.jsxs("div",{className:"grid gap-4 mb-4 grid-cols-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"update-name",className:"block mb-2 text-sm font-medium text-gray-700",children:"Category Name"}),e.jsx("input",{type:"text",name:"name",id:"update-name",value:n.name,onChange:M,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-3",placeholder:"Enter category name",required:!0}),(a==null?void 0:a.name)&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"update-category-image",className:"block mb-2 text-sm font-medium text-gray-700",children:"Category Image"}),e.jsx("input",{type:"file",id:"update-category-image",onChange:J,accept:"image/*",className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 file:bg-primary-600 file:text-white file:border-0 file:py-2 file:px-4 file:rounded-l-lg file:hover:bg-primary-700"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload a category image (PNG, JPG, JPEG, or GIF, max 1MB)."}),i.image&&e.jsx("small",{children:e.jsx("a",{href:`/storage/${i.image}`,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-primary-600 hover:text-primary-700",children:"See current image"})}),(a==null?void 0:a.category_image)&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.category_image})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"update-description",className:"block mb-2 text-sm font-medium text-gray-700",children:"Category Description"}),e.jsx("textarea",{id:"update-description",name:"description",rows:4,value:n.description,onChange:M,className:"block p-3 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-primary-500 resize-none focus:border-primary-500",placeholder:"Enter category description..."}),(a==null?void 0:a.description)&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.description})]})]}),e.jsxs("button",{type:"submit",disabled:S,className:"text-white inline-flex items-center bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-200 font-medium rounded-lg text-sm px-6 py-3 text-center disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fas fa-edit w-4 h-4 mr-2"}),S?"Updating...":"Update Category"]})]})]})}),_&&x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl p-4 w-full max-w-md mx-4 border border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"absolute top-3 right-3 text-gray-400 bg-transparent hover:bg-gray-100 hover:text-gray-600 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center transition-colors",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})}),e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 w-12 h-12 text-red-500 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-exclamation-circle w-12 h-12"})}),e.jsx("h3",{className:"mb-5 text-md font-medium text-gray-700",children:"Are you sure you want to delete this category? This action cannot be undone."}),e.jsxs("form",{onSubmit:B,children:[e.jsx("button",{type:"submit",disabled:F,className:"text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-red-200 font-medium rounded-lg text-sm inline-flex items-center px-6 py-3 text-center disabled:opacity-50 disabled:cursor-not-allowed",children:F?"Deleting...":"Yes, Delete Category"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"py-3 px-6 ml-3 text-sm font-medium text-gray-700 focus:outline-none bg-white rounded-lg border border-gray-300 hover:bg-gray-50 hover:text-gray-800",children:"Cancel"})]})]})]})})]})}export{V as default};
