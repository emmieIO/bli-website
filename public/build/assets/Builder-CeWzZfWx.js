import{u as _,r as d,j as e,H as E,L as b,a as i}from"./app-iZFBwIkI.js";import{D as F}from"./DashboardLayout-CbaSFTCh.js";import"./Toast-1DjreMWI.js";function B({course:s}){var f,y;const{sideLinks:j,errors:l}=_().props,[o,u]=d.useState(""),[c,h]=d.useState(""),[m,p]=d.useState(""),[g,N]=d.useState([]),[x,a]=d.useState(!1),v=t=>{N(r=>r.includes(t)?r.filter(n=>n!==t):[...r,t])},w=t=>{t.preventDefault(),o.trim()&&(a(!0),i.post(route("admin.requirements.store",s.slug),{requirement:o},{preserveScroll:!0,onSuccess:()=>{u("")},onFinish:()=>{a(!1)}}))},S=t=>{confirm("Are you sure you want to delete this requirement?")&&i.delete(route("admin.requirements.destroy",[s.slug,t]),{preserveScroll:!0})},k=t=>{t.preventDefault(),c.trim()&&(a(!0),i.post(route("admin.outcomes.store",s.slug),{outcome:c},{preserveScroll:!0,onSuccess:()=>{h("")},onFinish:()=>{a(!1)}}))},A=t=>{confirm("Are you sure you want to delete this outcome?")&&i.delete(route("admin.outcomes.destroy",[s.slug,t]),{preserveScroll:!0})},q=t=>{t.preventDefault(),m.trim()&&(a(!0),i.post(route("admin.modules.store",s.slug),{title:m},{preserveScroll:!0,onSuccess:()=>{p("")},onFinish:()=>{a(!1)}}))},C=(t,r)=>{confirm("Are you sure you want to delete this lesson?")&&i.delete(route("admin.lessons.destroy",[t,r]),{preserveScroll:!0})},M=(t,r)=>{const n=prompt("Edit Module Title:",r);!n||n.trim()===""||n===r||(a(!0),i.put(route("admin.modules.update",[s.slug,t]),{title:n.trim()},{preserveScroll:!0,onFinish:()=>{a(!1)}}))},D=t=>{confirm("Are you sure you want to delete this module? All lessons within this module will also be deleted.")&&(a(!0),i.delete(route("admin.modules.destroy",[s.slug,t]),{preserveScroll:!0,onFinish:()=>{a(!1)}}))},L=t=>{switch(t){case"video":return"ðŸŽ¥";case"pdf":return"ðŸ“„";case"link":return"ðŸ”—";default:return"ðŸ“"}};return e.jsxs(F,{sideLinks:j,children:[e.jsx(E,{title:`Course Builder - ${s.title}`}),e.jsxs("div",{className:"px-4 md:px-6 py-6",children:[e.jsxs("div",{className:"mb-8 p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Level:"})," ",s.level||"Beginner"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",((f=s.category)==null?void 0:f.name)||"Uncategorized"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Instructor:"})," ",((y=s.instructor)==null?void 0:y.name)||"N/A"]}),s.thumbnail_path&&e.jsx("div",{children:e.jsx("img",{src:`/storage/${s.thumbnail_path}`,alt:"Thumbnail",className:"h-24 w-24 object-cover rounded mt-2"})})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(b,{href:route("admin.courses.index"),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:ring-gray-200",children:"â† Back to Courses"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-5 self-start",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Course Requirements"}),e.jsx("ul",{className:"space-y-2 mb-4",children:s.requirements&&s.requirements.length>0?s.requirements.map(t=>e.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-700 text-sm",children:t.requirement}),e.jsx("button",{onClick:()=>S(t.id),className:"text-gray-400 text-sm cursor-pointer flex items-center space-x-2 hover:text-red-600",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})})]},t.id)):e.jsx("li",{className:"text-sm text-gray-500 italic",children:"No requirements yet."})}),e.jsxs("form",{onSubmit:w,className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:o,onChange:t=>u(t.target.value),placeholder:"Add new requirement",className:"flex-1 rounded-lg border focus:ring-2 focus:ring-primary border-primary p-2 text-sm text-gray-900"}),e.jsx("button",{type:"submit",disabled:x||!o.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add"})]}),(l==null?void 0:l.requirement)&&e.jsx("span",{className:"text-red-600 text-xs mt-1 block",children:l.requirement})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-5 self-start",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Learning Outcomes"}),e.jsx("ul",{className:"space-y-2 mb-4",children:s.outcomes&&s.outcomes.length>0?s.outcomes.map(t=>e.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-700 text-sm",children:t.outcome}),e.jsx("button",{onClick:()=>A(t.id),className:"text-gray-400 text-sm cursor-pointer flex items-center space-x-2 hover:text-red-600",children:e.jsx("i",{className:"fas fa-times w-4 h-4"})})]},t.id)):e.jsx("li",{className:"text-sm text-gray-500 italic",children:"No outcomes yet."})}),e.jsxs("form",{onSubmit:k,className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:c,onChange:t=>h(t.target.value),placeholder:"Add learning outcome",className:"flex-1 rounded-lg border focus:ring-2 focus:ring-primary border-primary p-2 text-sm text-gray-900"}),e.jsx("button",{type:"submit",disabled:x||!c.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add"})]}),(l==null?void 0:l.outcome)&&e.jsx("span",{className:"text-red-600 text-xs mt-1 block",children:l.outcome})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("form",{onSubmit:q,className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("input",{type:"text",value:m,onChange:t=>p(t.target.value),placeholder:"New Module Title",className:"w-full sm:w-auto flex-1 rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary focus:ring-primary"}),e.jsx("button",{type:"submit",disabled:x||!m.trim(),className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add Module"})]}),(l==null?void 0:l.title)&&e.jsx("small",{className:"mt-2 text-xs text-red-500 block",children:l.title})]}),e.jsx("div",{className:"space-y-6",children:s.modules&&s.modules.length>0?s.modules.map(t=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer",onClick:()=>v(t.id),children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[g.includes(t.id)?e.jsx("i",{className:"fas fa-minus w-5 h-5 text-gray-500"}):e.jsx("i",{className:"fas fa-plus w-5 h-5 text-gray-500"}),e.jsxs("div",{className:"flex space-x-2",onClick:r=>r.stopPropagation(),children:[e.jsx(b,{href:route("admin.lessons.create",t.slug),className:"inline-flex cursor-pointer items-center px-3 py-1.5 text-sm font-medium text-gray-500 hover:text-primary rounded-lg",children:"+ Add Lesson"}),e.jsx("button",{onClick:()=>M(t.slug,t.title),className:"inline-flex cursor-pointer items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 rounded-lg",title:"Edit Module",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{onClick:()=>D(t.slug),className:"inline-flex cursor-pointer items-center px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 rounded-lg",title:"Delete Module",children:e.jsx("i",{className:"fas fa-trash"})})]})]})]}),g.includes(t.id)&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("ul",{className:"space-y-2",children:t.lessons&&t.lessons.length>0?t.lessons.map(r=>e.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-gray-700 font-bold",children:[L(r.type)," ",r.type.charAt(0).toUpperCase()+r.type.slice(1),": ",r.title]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.type==="video"&&e.jsx("a",{href:`/storage/${r.content_path}`,className:"text-green-500 hover:text-green-700 text-sm",children:"View"}),r.type==="pdf"&&e.jsx("a",{href:`/storage/${r.content_path}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-primary hover:underline text-sm",title:"View PDF",children:e.jsx("i",{className:"fas fa-file-pdf w-4 h-4"})}),r.type==="link"&&e.jsx("a",{href:r.content_path,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-primary hover:underline text-sm",children:e.jsx("i",{className:"fas fa-external-link-alt w-4 h-4"})}),e.jsx("button",{onClick:()=>C(t.slug,r.slug),className:"inline-flex items-center text-red-600 hover:text-red-800",title:"Delete Lesson",children:e.jsx("i",{className:"fas fa-trash w-4 h-4"})})]})]},r.id)):e.jsx("li",{className:"text-sm text-gray-500 italic",children:"No lessons yet."})})})]},t.id)):e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:"No modules yet. Add your first module above."})})]})]})}export{B as default};
