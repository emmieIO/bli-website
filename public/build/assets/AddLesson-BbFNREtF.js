import{u as C,r as l,j as e,H as L,L as S,a as D}from"./app-jgboj4cM.js";import{D as P}from"./DashboardLayout-Be8NwqFD.js";import"./Toast-BVSuYdEZ.js";function V({module:a,lessontypes:x}){const{sideLinks:g,errors:t}=C().props,[d,c]=l.useState(!1),[s,m]=l.useState({title:"",type:"",description:"",is_preview:!1,has_instruction:!1,assignment_instructions:"",link_url:""}),[u,h]=l.useState(null),[p,b]=l.useState(null),r=i=>{const{name:n,value:N,type:w}=i.target;if(w==="checkbox"){const o=i.target.checked;m(F=>({...F,[n]:o}))}else m(o=>({...o,[n]:N}))},y=i=>{i.target.files&&i.target.files[0]&&h(i.target.files[0])},f=i=>{i.target.files&&i.target.files[0]&&b(i.target.files[0])},j=i=>{i.preventDefault(),c(!0);const n=new FormData;n.append("title",s.title),n.append("type",s.type),n.append("description",s.description),s.is_preview&&n.append("is_preview","1"),s.has_instruction&&s.assignment_instructions&&(n.append("has_instruction","1"),n.append("assignment_instructions",s.assignment_instructions)),s.link_url&&n.append("link_url",s.link_url),s.type==="video"&&u&&n.append("video_field",u),s.type==="pdf"&&p&&n.append("content_path",p),D.post(route("instructor.lessons.store",a.id),n,{preserveScroll:!0,onFinish:()=>{c(!1)}})},_=s.type==="video",v=s.type==="pdf",k=s.type==="link";return e.jsxs(P,{sideLinks:g,children:[e.jsx(L,{title:`Add Lesson to ${a.title}`}),e.jsxs("header",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Add Lesson to ",a.title]}),e.jsx("p",{className:"text-gray-600",children:"Create a new lesson and assign it to the selected module."}),e.jsx(S,{href:route("instructor.courses.builder",a.course.id),className:"bg-white p-2.5 text-gray-800 border rounded-md my-1 inline-block",children:"Go back to builder"})]}),e.jsx("div",{children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block mb-2 text-sm font-medium text-gray-900",children:"Lesson Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:s.title,onChange:r,className:"bg-gray-50 border border-gray-300 focus:ring-primary focus:border-primary text-gray-900 text-sm rounded-lg block w-full p-2.5",required:!0}),(t==null?void 0:t.title)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block mb-2 text-sm font-medium text-gray-900",children:"Lesson Type"}),e.jsxs("select",{id:"type",name:"type",value:s.type,onChange:r,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block w-full p-2.5",required:!0,children:[e.jsx("option",{value:"",children:"Choose a lesson type"}),x.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]}),(t==null?void 0:t.type)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.type})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900",children:"Description"}),e.jsx("textarea",{name:"description",id:"description",rows:10,value:s.description,onChange:r,className:"bg-gray-50 border border-gray-300 resize-none text-gray-900 text-sm focus:ring-primary focus:border-primary rounded-lg block w-full p-2.5"}),(t==null?void 0:t.description)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.description})]}),_&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"video_lesson",className:"block mb-2 text-sm font-medium text-gray-900",children:"Video Resource"}),e.jsx("input",{type:"file",accept:".mp4,.mov,.mkv",name:"video_field",id:"video_lesson",onChange:y,className:"bg-gray-50 border border-gray-300 file:bg-primary text-gray-900 text-sm rounded-lg block w-full"}),(t==null?void 0:t.video_field)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.video_field}),e.jsxs("div",{className:"flex items-center mt-3 px-1",children:[e.jsx("input",{id:"is_preview",type:"checkbox",name:"is_preview",checked:s.is_preview,onChange:r,className:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-primary text-primary"}),e.jsx("label",{htmlFor:"is_preview",className:"ml-2 text-sm font-medium text-gray-900",children:"Is Preview?"})]})]}),v&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content_path",className:"block mb-2 text-sm font-medium text-gray-900",children:"PDF Resource File"}),e.jsx("input",{type:"file",name:"content_path",id:"content_path",accept:".pdf",onChange:f,className:"bg-gray-50 border border-gray-300 text-gray-900 focus:ring-primary focus:border-primary file:bg-primary text-sm rounded-lg block w-full"}),(t==null?void 0:t.content_path)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.content_path})]}),k&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"url",className:"block mb-2 text-sm font-medium text-gray-900",children:"Resource Link"}),e.jsx("input",{type:"url",name:"link_url",id:"url",value:s.link_url,onChange:r,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5"}),(t==null?void 0:t.link_url)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.link_url})]}),e.jsxs("div",{className:"flex items-center mt-3 px-1",children:[e.jsx("input",{id:"has_instruction",type:"checkbox",name:"has_instruction",checked:s.has_instruction,onChange:r,className:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-primary text-primary"}),e.jsx("label",{htmlFor:"has_instruction",className:"ml-2 text-sm font-medium text-gray-900",children:"Has Instructions"})]}),s.has_instruction&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"assignment_instructions",className:"block mb-2 text-sm font-medium text-gray-900",children:"Assignment Instructions"}),e.jsx("textarea",{name:"assignment_instructions",id:"assignment_instructions",rows:4,value:s.assignment_instructions,onChange:r,className:"bg-gray-50 border resize-none border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5"}),(t==null?void 0:t.assignment_instructions)&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.assignment_instructions})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full text-white bg-primary hover:bg-primary-600 focus:ring-4 focus:outline-none focus:ring-primary font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving...":"Save Lesson"})]})})]})}export{V as default};
