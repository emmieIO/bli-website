import{r as i,j as e,H,L as p,a as P}from"./app-CXX3rjxJ.js";import{D as _}from"./DashboardLayout-DFjY4ebl.js";import"./Toast-D60RrfJo.js";function F({course:a,currentLesson:t,previousLesson:g,nextLesson:x,progress:m,totalLessons:k,completedLessons:C}){const[c,M]=i.useState("overview"),[v,y]=i.useState([]),[N,S]=i.useState(!0),[n,j]=i.useState((t==null?void 0:t.completed)||!1),[B,R]=i.useState(0),[A,D]=i.useState(1),[h,$]=i.useState(!1),o=i.useRef(null),u=i.useRef();i.useEffect(()=>{a.modules&&a.modules.length>0&&v.length===0&&y([a.modules[0].id])},[a.modules]),i.useEffect(()=>{t&&(z(t.id),j(t.completed||!1))},[t]),i.useEffect(()=>{const s=o.current;if(!s)return;const l=()=>{if(s.duration){const d=s.currentTime/s.duration*100;R(d),clearTimeout(u.current),u.current=setTimeout(()=>{b(!1)},1e4)}},r=()=>{b(!0),n||w()};return s.addEventListener("timeupdate",l),s.addEventListener("ended",r),()=>{s.removeEventListener("timeupdate",l),s.removeEventListener("ended",r),u.current&&clearTimeout(u.current)}},[n,t]);const T=s=>{y(l=>l.includes(s)?l.filter(r=>r!==s):[...l,s])},z=async s=>{try{const r=await(await fetch(`/api/lessons/${s}/progress`)).json();r.progress&&(r.progress.is_completed&&j(!0),r.progress.last_position&&o.current&&(o.current.currentTime=r.progress.last_position))}catch(l){console.error("Failed to load lesson progress:",l)}},b=async s=>{var l;if(!(!t||!o.current))try{await fetch(`/api/lessons/${t.id}/progress`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.content)||""},body:JSON.stringify({current_time:o.current.currentTime,duration:o.current.duration,is_completed:s})})}catch(r){console.error("Failed to save progress:",r)}},w=async()=>{var s;if(!(!t||n))try{(await(await fetch(`/api/lessons/${t.id}/complete`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content)||""}})).json()).success&&(j(!0),x&&setTimeout(()=>{confirm("Lesson completed! Would you like to proceed to the next lesson?")&&P.visit(route("courses.learn",{course:a.slug,lesson:x.id}))},2e3))}catch(l){console.error("Failed to mark lesson as complete:",l)}},W=()=>{$(!h)},f=s=>{if(!s)return"";if(typeof s=="string")return s;const l=Math.floor(s/3600),r=Math.floor(s%3600/60),d=s%60;return l>0?`${l}:${r.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:`${r}:${d.toString().padStart(2,"0")}`},E=s=>{switch(s){case"video":return e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})});case"pdf":return e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})});default:return e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}};return e.jsxs(_,{children:[e.jsx(H,{title:`${a.title} - Learn`}),e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(p,{href:route("courses.show",a.slug),className:"text-gray-600 hover:text-primary transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate max-w-md",children:a.title}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${m}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[m,"% complete"]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("button",{onClick:()=>S(!N),className:"p-2 text-gray-600 hover:text-primary transition-colors lg:hidden",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]})})}),e.jsxs("div",{className:"flex h-[calc(100vh-4rem)]",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gray-900 rounded-lg overflow-hidden relative",children:t&&t.video_url?e.jsxs("div",{className:"aspect-video relative",children:[e.jsxs("video",{ref:o,className:"w-full h-full",controls:!0,preload:"metadata",poster:"/images/video-placeholder.jpg",children:[e.jsx("source",{src:t.video_url,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-600",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${B}%`}})})]}):e.jsx("div",{className:"aspect-video flex items-center justify-center text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m2 4H7a2 2 0 01-2-2V8a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2z"})}),e.jsx("p",{children:"No video available for this lesson"})]})})}),t&&e.jsxs("div",{className:"flex items-center justify-between mt-4 px-6 py-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:w,disabled:n,className:`flex items-center px-4 py-2 rounded-lg transition-colors ${n?"bg-gray-500 text-white cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:n?"Completed":"Mark as Complete"})]}),e.jsxs("button",{onClick:W,className:`flex items-center px-4 py-2 rounded-lg transition-colors ${h?"bg-yellow-700 text-white":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:h?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),h?"Bookmarked":"Bookmark"]})]}),t.duration&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Duration: ",f(t.duration)]})]}),e.jsxs("div",{className:"flex-1 bg-white overflow-hidden flex flex-col",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:g&&e.jsxs(p,{href:route("courses.learn",{course:a.slug,lesson:g.id}),className:"inline-flex items-center text-sm text-gray-600 hover:text-primary transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Previous"]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?t.title:"Course Overview"}),(t==null?void 0:t.subtitle)&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.subtitle})]}),e.jsx("div",{children:x&&e.jsxs(p,{href:route("courses.learn",{course:a.slug,lesson:x.id}),className:"inline-flex items-center text-sm text-gray-600 hover:text-primary transition-colors",children:["Next",e.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex px-6",children:["overview","notes","resources","discussion"].map(s=>e.jsx("button",{onClick:()=>M(s),className:`py-4 px-1 border-b-2 font-medium text-sm mr-8 capitalize ${c===s?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s},s))})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c==="overview"&&e.jsx("div",{children:t?e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("h3",{children:"Lesson Description"}),e.jsx("p",{children:t.description||"No description available for this lesson."}),t.duration&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mt-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-blue-800 font-medium",children:["Duration: ",f(t.duration)]})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Welcome to ",a.title]}),e.jsx("p",{className:"text-gray-600 mb-6",children:a.description}),a.outcomes&&a.outcomes.length>0&&e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"What you'll learn:"}),e.jsx("ul",{className:"text-left text-green-700 space-y-1 max-w-2xl mx-auto",children:a.outcomes.slice(0,5).map(s=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),s.outcome]},s.id))})]})]})}),c==="notes"&&e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Notes"}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"Add Note"})]}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("p",{children:"No notes yet. Start taking notes as you learn!"})]})]}),c==="resources"&&e.jsxs("div",{className:"max-w-4xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Course Resources"}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),e.jsx("p",{children:"No resources available for this lesson."})]})]}),c==="discussion"&&e.jsxs("div",{className:"max-w-4xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Discussion & Q&A"}),e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),e.jsx("p",{children:"Discussion feature coming soon!"})]})]})]})]})]}),e.jsxs("div",{className:`w-80 bg-white border-l border-gray-200 flex flex-col ${N?"":"hidden"} lg:flex`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Course Progress"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[C,"/",k," lessons"]}),e.jsxs("span",{children:[m,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${m}%`}})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:a.modules&&a.modules.length>0?a.modules.map(s=>{var l;return e.jsxs("div",{className:"border-b border-gray-200",children:[e.jsx("button",{onClick:()=>T(s.id),className:"w-full text-left p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[((l=s.lessons)==null?void 0:l.length)||0," lessons"]})]}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transform transition-transform ${v.includes(s.id)?"rotate-90":""}`,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 4l4 4-4 4"})})]})}),v.includes(s.id)&&s.lessons&&s.lessons.length>0&&e.jsx("div",{children:s.lessons.map((r,d)=>e.jsx(p,{href:route("courses.learn",{course:a.slug,lesson:r.id}),className:`block px-6 py-3 border-b border-gray-100 hover:bg-gray-50 transition-colors ${t&&t.id===r.id?"bg-blue-50 border-l-4 border-l-primary":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 ${r.completed?"bg-green-500 border-green-500":"border-gray-300"} flex items-center justify-center mr-3`,children:r.completed?e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("span",{className:"text-xs text-gray-600",children:d+1})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900",children:r.title}),r.duration&&e.jsx("p",{className:"text-xs text-gray-500",children:f(r.duration)})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:E(r.type)})]})},r.id))})]},s.id)}):e.jsx("div",{className:"p-6 text-center text-gray-500",children:e.jsx("p",{children:"No course content available"})})})]})]})]})]})}export{F as default};
