import{u as f,b as d,r as g,j as e,H as y,L as l}from"./app-63X6Ah_A.js";import{D as j,S as w}from"./DashboardLayout-B0i_67k7.js";import{F as p}from"./file-text-CmkKLYb0.js";import"./Toast-BItVFW1U.js";import"./createLucideIcon-DvCTRfYt.js";import"./index-B7mgmw7u.js";import"./menu-BGW4nfae.js";import"./house-Rmg1qdOk.js";import"./shopping-cart-DcL4Uy6X.js";import"./user-M0mJPmzy.js";import"./book-open-CIt5k5tX.js";function L({transactions:s,payouts:r,filters:x}){const{sideLinks:h}=f().props,[n,c]=d.useState("transactions"),[i,u]=d.useState(x.q||"");d.useEffect(()=>{const t=setTimeout(()=>{i!==(x.q||"")&&g.get(route("admin.transactions-audit.index"),{q:i},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},[i]);const m=(t,a)=>new Intl.NumberFormat("en-US",{style:"currency",currency:a||"USD"}).format(t),o=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(j,{sideLinks:h,children:[e.jsx(y,{title:"Transaction Audit"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-montserrat",children:"Transaction Audit"}),e.jsx("p",{className:"text-sm text-gray-500 font-lato",children:"Monitor all incoming transactions and outgoing payouts."})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(w,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search transactions...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent font-lato",value:i,onChange:t=>u(t.target.value)})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>c("transactions"),className:`py-4 px-1 border-b-2 font-medium text-sm font-montserrat ${n==="transactions"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Incoming Transactions"}),e.jsx("button",{onClick:()=>c("payouts"),className:`py-4 px-1 border-b-2 font-medium text-sm font-montserrat ${n==="payouts"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Instructor Payouts"})]})}),n==="transactions"&&e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 font-montserrat",children:"Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.data.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 font-lato",children:t.transaction_id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-lato",children:t.user?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-gray-900 font-medium",children:t.user.name}),e.jsx("div",{className:"text-xs",children:t.user.email})]}):"Unknown User"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-lato",children:t.course?t.course.title:"Cart Purchase / Other"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium font-montserrat",children:m(t.amount,t.currency)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-lato",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="successful"?"bg-green-100 text-green-800":t.status==="failed"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-lato",children:o(t.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.status==="successful"&&e.jsxs(l,{href:route("transactions.show-receipt",t.id),target:"_blank",className:"text-blue-600 hover:text-blue-900 inline-flex items-center gap-1",children:[e.jsx(p,{className:"w-4 h-4"}),"View Receipt"]})})]},t.id)),s.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-sm text-gray-500 font-lato",children:"No transactions found."})})]})]})}),e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsx("div",{className:"flex-1 flex justify-between sm:hidden"}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 font-lato",children:["Showing ",e.jsx("span",{className:"font-medium",children:(s.current_page-1)*15+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(s.current_page*15,s.total)})," of ",e.jsx("span",{className:"font-medium",children:s.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:s.links.map((t,a)=>e.jsx(l,{href:t.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${t.active?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${t.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:t.label}},a))})})]})]})]}),n==="payouts"&&e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 font-montserrat",children:"Instructor Payouts"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Instructor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Requested At"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider font-montserrat",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.data.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 font-lato",children:t.payout_reference}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-lato",children:t.instructor?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-gray-900 font-medium",children:t.instructor.name}),e.jsx("div",{className:"text-xs",children:t.instructor.email})]}):"Unknown Instructor"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium font-montserrat",children:m(t.amount,t.currency)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-lato",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="completed"?"bg-green-100 text-green-800":t.status==="failed"||t.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-lato",children:o(t.requested_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs(l,{href:route("admin.payouts.show",t.id),className:"text-primary hover:text-primary-600 inline-flex items-center gap-1",children:[e.jsx(p,{className:"w-4 h-4"}),"View Payout"]})})]},t.id)),r.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500 font-lato",children:"No payouts found."})})]})]})}),e.jsx("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 font-lato",children:["Showing ",e.jsx("span",{className:"font-medium",children:(r.current_page-1)*15+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(r.current_page*15,r.total)})," of ",e.jsx("span",{className:"font-medium",children:r.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:r.links.map((t,a)=>e.jsx(l,{href:t.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${t.active?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${t.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:t.label}},a))})})]})})]})]})}export{L as default};
