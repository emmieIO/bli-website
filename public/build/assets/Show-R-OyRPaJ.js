import{a as i,j as s,H as j,L as b}from"./app-GBbDLcQe.js";import{D as y,a as f}from"./DashboardLayout-D-kafCHd.js";import{A as v}from"./arrow-left-BWqhqmFn.js";import"./Toast-Ct3dcQLD.js";import"./createLucideIcon-CBbYal5B.js";import"./index-B7mgmw7u.js";import"./menu-q3t5ENie.js";import"./house-BeVv8tVL.js";import"./shopping-cart-DR-AUMrS.js";import"./user-BMYG4lzG.js";import"./book-open-DFfCw7Eo.js";function A({ticket:e}){const{data:n,setData:o,post:m,processing:a,errors:t,reset:c}=i({message:""}),{data:x,setData:u,post:p,processing:d,errors:l}=i({status:e.status});function h(r){r.preventDefault(),m(route("admin.tickets.reply",e.id),{onSuccess:()=>c("message")})}function g(r){r.preventDefault(),p(route("admin.tickets.status",e.id))}return s.jsxs(y,{children:[s.jsx(j,{title:`Ticket: ${e.subject}`}),s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:s.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:s.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:["Ticket #",e.reference_code]}),s.jsx("h1",{className:"text-2xl font-bold",children:e.subject})]}),s.jsxs(b,{href:route("admin.tickets.index"),className:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md",children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"Back to Tickets"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"User:"})," ",e.user.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",e.status]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Priority:"})," ",e.priority]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Created:"})," ",new Date(e.created_at).toLocaleString()]})]}),s.jsx("div",{children:s.jsxs("form",{onSubmit:g,children:[s.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Change Status"}),s.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[s.jsxs("select",{id:"status",value:x.status,onChange:r=>u("status",r.target.value),className:"block w-full rounded-none rounded-l-md border-gray-300 focus:border-primary-500 focus:ring-primary-500",disabled:e.status==="closed",children:[s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"closed",children:"Closed"})]}),s.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-l-0 border-gray-300 rounded-r-md bg-gray-50 text-sm font-medium text-gray-700 hover:bg-gray-100",disabled:d||e.status==="closed",children:d?"Saving...":"Save"})]}),l.status&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.status})]})})]}),s.jsx("div",{className:"space-y-4",children:e.replies.map(r=>s.jsxs("div",{className:"p-4 rounded-lg bg-gray-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("p",{className:"font-bold",children:r.user.name}),s.jsx("p",{className:"text-sm text-gray-500",children:new Date(r.created_at).toLocaleString()})]}),s.jsx("p",{children:r.message})]},r.id))}),s.jsx("div",{className:"mt-8",children:s.jsxs("form",{onSubmit:h,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:"Your Reply"}),s.jsx("textarea",{id:"message",rows:4,value:n.message,onChange:r=>o("message",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:e.status==="closed"}),t.message&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.message})]}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-md",disabled:a||e.status==="closed",children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),a?"Sending...":"Send Reply"]})})]})})]})})})})]})}export{A as default};
